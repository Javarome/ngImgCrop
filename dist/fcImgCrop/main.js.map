{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.scss","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/fc-img-crop/classes/crop-area-circle.ts","webpack:///./src/app/fc-img-crop/classes/crop-area-square.ts","webpack:///./src/app/fc-img-crop/classes/crop-area.ts","webpack:///./src/app/fc-img-crop/classes/crop-canvas.ts","webpack:///./src/app/fc-img-crop/classes/crop-exif.ts","webpack:///./src/app/fc-img-crop/classes/crop-host.ts","webpack:///./src/app/fc-img-crop/classes/crop-pubsub.ts","webpack:///./src/app/fc-img-crop/fc-img-crop.component.scss","webpack:///./src/app/fc-img-crop/fc-img-crop.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"<div>\\n  <label><input type=\\\"checkbox\\\" [(ngModel)]=\\\"enableCrop\\\"/> Add fcImgCrop to Page</label>\\n</div>\\n<div>\\n  Container size: <label><input type=\\\"radio\\\" [(ngModel)]=\\\"size\\\" value=\\\"big\\\"/> Big</label> <label><input type=\\\"radio\\\"\\n    [(ngModel)]=\\\"size\\\" value=\\\"medium\\\"/> Medium</label> <label><input type=\\\"radio\\\" [(ngModel)]=\\\"size\\\" value=\\\"small\\\"/>\\n  Small</label>\\n</div>\\n<div>\\n  Area type: <label><input type=\\\"radio\\\" [(ngModel)]=\\\"type\\\" value=\\\"circle\\\"/> Circle</label> <label><input type=\\\"radio\\\"\\n    [(ngModel)]=\\\"type\\\" value=\\\"square\\\"/> Square</label>\\n  <!--<label><input type=\\\"radio\\\" [(ngModel)]=\\\"type\\\" value=\\\"rectangle\\\" /> Rectangle</label>-->\\n</div>\\n<div>\\n  <label><input type=\\\"checkbox\\\" [(ngModel)]=\\\"changeOnFly\\\"/> Change On Fly</label>\\n</div>\\n<!--\\n<div>\\n  <label>Aspect Ratio: <input type=\\\"text\\\" [(ngModel)]=\\\"aspectRatio\\\" /></label>\\n</div>\\n-->\\n<div>\\n  <label>Area Min Size (Size = Width = Height): <input type=\\\"text\\\" [(ngModel)]=\\\"selMinSize\\\"/></label>\\n</div>\\n<div>\\n  <label>Result Image Size (Size = Width = Height): <input type=\\\"text\\\" [(ngModel)]=\\\"resImgSize\\\"/></label>\\n</div>\\n<div>\\n  Result Image Format: <label><input type=\\\"radio\\\" [(ngModel)]=\\\"resultImageFormat\\\" value=\\\"image/jpeg\\\"/> image/jpeg</label>\\n  <label><input type=\\\"radio\\\" [(ngModel)]=\\\"resultImageFormat\\\" value=\\\"image/png\\\"/> image/png</label> <label><input type=\\\"radio\\\"\\n    [(ngModel)]=\\\"resultImageFormat\\\" value=\\\"image/webp\\\"/> image/webp</label>\\n</div>\\n<div>\\n  <label>Result Image Quality (0<=X<=1): <input type=\\\"text\\\" [(ngModel)]=\\\"resultImgQuality\\\"/></label>\\n</div>\\n<form [hidden]=\\\"!enableCrop\\\">\\n  <label for=\\\"fileInput\\\">Select Image:</label> <input type=\\\"file\\\" id=\\\"fileInput\\\"/>\\n  <button type=\\\"reset\\\">Clear</button>\\n  <button (click)=\\\"imageDataURI='test.jpg'\\\">Set Test Image</button>\\n</form>\\n<div>\\n  <label>Image URL: <input type=\\\"text\\\" [(ngModel)]=\\\"edtImageURI\\\"/></label>\\n  <button (click)=\\\"imageDataURI=edtImageURI\\\">Set Image</button>\\n</div>\\n<div>\\n  <button (click)=\\\"imageDataURI=''\\\">Reset Image</button>\\n</div>\\n\\n<div *ngIf=\\\"enableCrop\\\" class=\\\"cropArea\\\"\\n    [ngClass]=\\\"{'big':size=='big', 'medium':size=='medium', 'small':size=='small'}\\\">\\n  <fc-img-crop\\n      [image]=\\\"imageDataURI\\\"\\n      [(resultImage)]=\\\"resultImageDataURI\\\"\\n      [(areaDetails)]=\\\"cropDetails\\\"\\n      [changeOnFly]=\\\"changeOnFly\\\"\\n      [areaType]=\\\"type\\\"\\n      [areaMinSize]=\\\"selMinSize\\\"\\n      [resultImageFormat]=\\\"resultImageFormat\\\"\\n      [resultImageQuality]=\\\"resultImgQuality\\\"\\n      [resultImageSize]=\\\"resImgSize\\\"\\n      (onChange)=\\\"onChange($event)\\\"\\n      (onLoadBegin)=\\\"onLoadBegin()\\\"\\n      (onLoadDone)=\\\"onLoadDone()\\\"\\n      (onLoadError)=\\\"onLoadError()\\\"\\n  ></fc-img-crop>\\n  <!--aspect-ratio=\\\"aspectRatio\\\"-->\\n</div>\\n\\n<div style=\\\"text-align:center\\\">\\n  <h3>Result</h3>\\n  <div>\\n    <img [src]=\\\"resultImageDataURI\\\"/>\\n    <p>{{cropDetails | json}}</p>\\n  </div>\\n</div>\\n\"","module.exports = \".cropArea {\\n  background: #E4E4E4;\\n  margin: auto;\\n  overflow: hidden; }\\n  .cropArea.big {\\n    width: 800px;\\n    height: 600px; }\\n  .cropArea.medium {\\n    width: 500px;\\n    height: 350px; }\\n  .cropArea.small {\\n    width: 300px;\\n    height: 200px; }\\n\"","import {ChangeDetectorRef, Component, OnInit} from '@angular/core';\nimport {CropAreaDetails} from \"./fc-img-crop/fc-img-crop.component\";\nimport {CropAreaType} from \"./fc-img-crop/classes/crop-area\";\n\nenum Size {\n  Small = 'small'\n}\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  enableCrop = true;\n  size = Size.Small;\n  type = CropAreaType.Circle;\n  imageDataURI = '';\n  resultImageDataURI = '';\n  resultImageFormat = 'image/png';\n  resultImgQuality = 1;\n  selMinSize = 100;\n  resImgSize = 200;\n  edtImageURI: string;\n  changeOnFly: boolean;\n\n  cropDetails: CropAreaDetails;\n  x: number;\n  y: number;\n  w: any;\n  h: any;\n\n  constructor(private ref: ChangeDetectorRef) {\n  }\n\n  ngOnInit(): void {\n    //this.aspectRatio=1.2;\n    var handleFileSelect = evt => {\n      var file = evt.currentTarget.files[0];\n      var reader = new FileReader();\n      reader.onload = evt => {\n        this.imageDataURI = evt.target.result;\n        this.ref.detectChanges();\n      };\n      reader.readAsDataURL(file);\n    };\n    document.querySelector('#fileInput').addEventListener('change', handleFileSelect);\n  }\n\n  onChange(change) {\n    console.log('onChange fired', change);\n  }\n\n  onLoadBegin() {\n    console.log('onLoadBegin fired');\n  }\n\n  onLoadDone() {\n    console.log('onLoadDone fired');\n  }\n\n  onLoadError() {\n    console.log('onLoadError fired');\n  }\n}\n","import {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\n\nimport {AppComponent} from './app.component';\nimport {FcImgCropComponent} from './fc-img-crop/fc-img-crop.component';\nimport {FormsModule} from \"@angular/forms\";\n\n@NgModule({\n    declarations: [\n        AppComponent,\n        FcImgCropComponent\n    ],\n    imports: [\n        BrowserModule,\n        FormsModule\n    ],\n    providers: [],\n    bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n","import {CropArea} from \"./crop-area\";\n\nexport class CropAreaCircle extends CropArea {\n  _boxResizeBaseSize = 20;\n  _boxResizeNormalRatio = 0.9;\n  _boxResizeHoverRatio = 1.2;\n  _iconMoveNormalRatio = 0.9;\n  _iconMoveHoverRatio = 1.2;\n\n  _posDragStartX = 0;\n  _posDragStartY = 0;\n  _posResizeStartX = 0;\n  _posResizeStartY = 0;\n  _posResizeStartSize = 0;\n\n  _boxResizeIsHover = false;\n  _areaIsHover = false;\n  _boxResizeIsDragging = false;\n  _areaIsDragging = false;\n\n  private _boxResizeNormalSize: number;\n  private _boxResizeHoverSize: number;\n\n  constructor(ctx, events) {\n    super(ctx, events);\n\n    this._boxResizeNormalSize = this._boxResizeBaseSize * this._boxResizeNormalRatio;\n    this._boxResizeHoverSize = this._boxResizeBaseSize * this._boxResizeHoverRatio;\n  }\n\n  _calcCirclePerimeterCoords(angleDegrees) {\n    var hSize = this._size / 2;\n    var angleRadians = angleDegrees * (Math.PI / 180),\n      circlePerimeterX = this._x + hSize * Math.cos(angleRadians),\n      circlePerimeterY = this._y + hSize * Math.sin(angleRadians);\n    return [circlePerimeterX, circlePerimeterY];\n  }\n\n  _calcResizeIconCenterCoords() {\n    return this._calcCirclePerimeterCoords(-45);\n  }\n\n  _isCoordWithinArea(coord) {\n    return Math.sqrt((coord[0] - this._x) * (coord[0] - this._x) + (coord[1] - this._y) * (coord[1] - this._y)) < this._size / 2;\n  };\n\n  _isCoordWithinBoxResize(coord) {\n    var resizeIconCenterCoords = this._calcResizeIconCenterCoords();\n    var hSize = this._boxResizeHoverSize / 2;\n    return (coord[0] > resizeIconCenterCoords[0] - hSize && coord[0] < resizeIconCenterCoords[0] + hSize &&\n      coord[1] > resizeIconCenterCoords[1] - hSize && coord[1] < resizeIconCenterCoords[1] + hSize);\n  };\n\n  _drawArea(ctx, centerCoords, size) {\n    ctx.arc(centerCoords[0], centerCoords[1], size / 2, 0, 2 * Math.PI);\n  };\n\n  draw() {\n    CropArea.prototype.draw.apply(this, arguments);\n\n    // draw move icon\n    this._cropCanvas.drawIconMove([this._x, this._y], this._areaIsHover ? this._iconMoveHoverRatio : this._iconMoveNormalRatio);\n\n    // draw resize cubes\n    this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(), this._boxResizeBaseSize, this._boxResizeIsHover ? this._boxResizeHoverRatio : this._boxResizeNormalRatio);\n  };\n\n  processMouseMove(mouseCurX, mouseCurY) {\n    var cursor = 'default';\n    var res = false;\n\n    this._boxResizeIsHover = false;\n    this._areaIsHover = false;\n\n    if (this._areaIsDragging) {\n      this._x = mouseCurX - this._posDragStartX;\n      this._y = mouseCurY - this._posDragStartY;\n      this._areaIsHover = true;\n      cursor = 'move';\n      res = true;\n      this._events.trigger('area-move');\n    } else if (this._boxResizeIsDragging) {\n      cursor = 'nesw-resize';\n      var iFR, iFX, iFY;\n      iFX = mouseCurX - this._posResizeStartX;\n      iFY = this._posResizeStartY - mouseCurY;\n      if (iFX > iFY) {\n        iFR = this._posResizeStartSize + iFY * 2;\n      } else {\n        iFR = this._posResizeStartSize + iFX * 2;\n      }\n\n      this._size = Math.max(this._minSize, iFR);\n      this._boxResizeIsHover = true;\n      res = true;\n      this._events.trigger('area-resize');\n    } else if (this._isCoordWithinBoxResize([mouseCurX, mouseCurY])) {\n      cursor = 'nesw-resize';\n      this._areaIsHover = false;\n      this._boxResizeIsHover = true;\n      res = true;\n    } else if (this._isCoordWithinArea([mouseCurX, mouseCurY])) {\n      cursor = 'move';\n      this._areaIsHover = true;\n      res = true;\n    }\n\n    this._dontDragOutside();\n    this._ctx.canvas.style.cursor = cursor;\n\n    return res;\n  };\n\n  processMouseDown(mouseDownX: number, mouseDownY: number) {\n    if (this._isCoordWithinBoxResize([mouseDownX, mouseDownY])) {\n      this._areaIsDragging = false;\n      this._areaIsHover = false;\n      this._boxResizeIsDragging = true;\n      this._boxResizeIsHover = true;\n      this._posResizeStartX = mouseDownX;\n      this._posResizeStartY = mouseDownY;\n      this._posResizeStartSize = this._size;\n      this._events.trigger('area-resize-start');\n    } else if (this._isCoordWithinArea([mouseDownX, mouseDownY])) {\n      this._areaIsDragging = true;\n      this._areaIsHover = true;\n      this._boxResizeIsDragging = false;\n      this._boxResizeIsHover = false;\n      this._posDragStartX = mouseDownX - this._x;\n      this._posDragStartY = mouseDownY - this._y;\n      this._events.trigger('area-move-start');\n    }\n  };\n\n  processMouseUp(/*mouseUpX, mouseUpY*/) {\n    if (this._areaIsDragging) {\n      this._areaIsDragging = false;\n      this._events.trigger('area-move-end');\n    }\n    if (this._boxResizeIsDragging) {\n      this._boxResizeIsDragging = false;\n      this._events.trigger('area-resize-end');\n    }\n    this._areaIsHover = false;\n    this._boxResizeIsHover = false;\n\n    this._posDragStartX = 0;\n    this._posDragStartY = 0;\n  };\n\n}","import {CropArea} from \"./crop-area\";\n\nexport class CropAreaSquare extends CropArea {\n    _resizeCtrlBaseRadius = 10;\n    _resizeCtrlNormalRatio = 0.75;\n    _resizeCtrlHoverRatio = 1;\n    _iconMoveNormalRatio = 0.9;\n    _iconMoveHoverRatio = 1.2;\n\n    _posDragStartX = 0;\n    _posDragStartY = 0;\n    _posResizeStartX = 0;\n    _posResizeStartY = 0;\n    _posResizeStartSize = 0;\n\n    _resizeCtrlIsHover = -1;\n    _areaIsHover = false;\n    _resizeCtrlIsDragging = -1;\n    _areaIsDragging = false;\n\n    private _resizeCtrlNormalRadius: number;\n    private _resizeCtrlHoverRadius: number;\n\n    constructor(ctx, events) {\n        super(ctx, events);\n\n        this._resizeCtrlNormalRadius = this._resizeCtrlBaseRadius * this._resizeCtrlNormalRatio;\n        this._resizeCtrlHoverRadius = this._resizeCtrlBaseRadius * this._resizeCtrlHoverRatio;\n    };\n\n    _calcSquareCorners() {\n        var hSize = this._size / 2;\n        return [\n            [this._x - hSize, this._y - hSize],\n            [this._x + hSize, this._y - hSize],\n            [this._x - hSize, this._y + hSize],\n            [this._x + hSize, this._y + hSize]\n        ];\n    }\n\n    _calcSquareDimensions() {\n        var hSize = this._size / 2;\n        return {\n            left: this._x - hSize,\n            top: this._y - hSize,\n            right: this._x + hSize,\n            bottom: this._y + hSize\n        };\n    }\n\n    _isCoordWithinArea(coord) {\n        var squareDimensions = this._calcSquareDimensions();\n        return (coord[0] >= squareDimensions.left && coord[0] <= squareDimensions.right && coord[1] >= squareDimensions.top && coord[1] <= squareDimensions.bottom);\n    }\n\n    _isCoordWithinResizeCtrl(coord) {\n        var resizeIconsCenterCoords = this._calcSquareCorners();\n        var res = -1;\n        for (var i = 0, len = resizeIconsCenterCoords.length; i < len; i++) {\n            var resizeIconCenterCoords = resizeIconsCenterCoords[i];\n            if (coord[0] > resizeIconCenterCoords[0] - this._resizeCtrlHoverRadius && coord[0] < resizeIconCenterCoords[0] + this._resizeCtrlHoverRadius &&\n                coord[1] > resizeIconCenterCoords[1] - this._resizeCtrlHoverRadius && coord[1] < resizeIconCenterCoords[1] + this._resizeCtrlHoverRadius) {\n                res = i;\n                break;\n            }\n        }\n        return res;\n    }\n\n    _drawArea(ctx, centerCoords, size) {\n        var hSize = size / 2;\n        ctx.rect(centerCoords[0] - hSize, centerCoords[1] - hSize, size, size);\n    }\n\n    draw() {\n        CropArea.prototype.draw.apply(this, arguments);\n\n        // draw move icon\n        this._cropCanvas.drawIconMove([this._x, this._y], this._areaIsHover ? this._iconMoveHoverRatio : this._iconMoveNormalRatio);\n\n        // draw resize cubes\n        var resizeIconsCenterCoords = this._calcSquareCorners();\n        for (var i = 0, len = resizeIconsCenterCoords.length; i < len; i++) {\n            var resizeIconCenterCoords = resizeIconsCenterCoords[i];\n            this._cropCanvas.drawIconResizeCircle(resizeIconCenterCoords, this._resizeCtrlBaseRadius, this._resizeCtrlIsHover === i ? this._resizeCtrlHoverRatio : this._resizeCtrlNormalRatio);\n        }\n    }\n\n    processMouseMove(mouseCurX, mouseCurY) {\n        var cursor = 'default';\n        var res = false;\n\n        this._resizeCtrlIsHover = -1;\n        this._areaIsHover = false;\n\n        if (this._areaIsDragging) {\n            this._x = mouseCurX - this._posDragStartX;\n            this._y = mouseCurY - this._posDragStartY;\n            this._areaIsHover = true;\n            cursor = 'move';\n            res = true;\n            this._events.trigger('area-move');\n        } else if (this._resizeCtrlIsDragging > -1) {\n            var xMulti, yMulti;\n            switch (this._resizeCtrlIsDragging) {\n                case 0: // Top Left\n                    xMulti = -1;\n                    yMulti = -1;\n                    cursor = 'nwse-resize';\n                    break;\n                case 1: // Top Right\n                    xMulti = 1;\n                    yMulti = -1;\n                    cursor = 'nesw-resize';\n                    break;\n                case 2: // Bottom Left\n                    xMulti = -1;\n                    yMulti = 1;\n                    cursor = 'nesw-resize';\n                    break;\n                case 3: // Bottom Right\n                    xMulti = 1;\n                    yMulti = 1;\n                    cursor = 'nwse-resize';\n                    break;\n            }\n            var iFX = (mouseCurX - this._posResizeStartX) * xMulti;\n            var iFY = (mouseCurY - this._posResizeStartY) * yMulti;\n            var iFR;\n            if (iFX > iFY) {\n                iFR = this._posResizeStartSize + iFY;\n            } else {\n                iFR = this._posResizeStartSize + iFX;\n            }\n            var wasSize = this._size;\n            this._size = Math.max(this._minSize, iFR);\n            var posModifier = (this._size - wasSize) / 2;\n            this._x += posModifier * xMulti;\n            this._y += posModifier * yMulti;\n            this._resizeCtrlIsHover = this._resizeCtrlIsDragging;\n            res = true;\n            this._events.trigger('area-resize');\n        } else {\n            var hoveredResizeBox = this._isCoordWithinResizeCtrl([mouseCurX, mouseCurY]);\n            if (hoveredResizeBox > -1) {\n                switch (hoveredResizeBox) {\n                    case 0:\n                        cursor = 'nwse-resize';\n                        break;\n                    case 1:\n                        cursor = 'nesw-resize';\n                        break;\n                    case 2:\n                        cursor = 'nesw-resize';\n                        break;\n                    case 3:\n                        cursor = 'nwse-resize';\n                        break;\n                }\n                this._areaIsHover = false;\n                this._resizeCtrlIsHover = hoveredResizeBox;\n                res = true;\n            } else if (this._isCoordWithinArea([mouseCurX, mouseCurY])) {\n                cursor = 'move';\n                this._areaIsHover = true;\n                res = true;\n            }\n        }\n\n        this._dontDragOutside();\n        this._ctx.canvas.style.cursor = cursor;\n\n        return res;\n    }\n\n    processMouseDown(mouseDownX, mouseDownY) {\n        var isWithinResizeCtrl = this._isCoordWithinResizeCtrl([mouseDownX, mouseDownY]);\n        if (isWithinResizeCtrl > -1) {\n            this._areaIsDragging = false;\n            this._areaIsHover = false;\n            this._resizeCtrlIsDragging = isWithinResizeCtrl;\n            this._resizeCtrlIsHover = isWithinResizeCtrl;\n            this._posResizeStartX = mouseDownX;\n            this._posResizeStartY = mouseDownY;\n            this._posResizeStartSize = this._size;\n            this._events.trigger('area-resize-start');\n        } else if (this._isCoordWithinArea([mouseDownX, mouseDownY])) {\n            this._areaIsDragging = true;\n            this._areaIsHover = true;\n            this._resizeCtrlIsDragging = -1;\n            this._resizeCtrlIsHover = -1;\n            this._posDragStartX = mouseDownX - this._x;\n            this._posDragStartY = mouseDownY - this._y;\n            this._events.trigger('area-move-start');\n        }\n    }\n\n    processMouseUp(/*mouseUpX, mouseUpY*/) {\n        if (this._areaIsDragging) {\n            this._areaIsDragging = false;\n            this._events.trigger('area-move-end');\n        }\n        if (this._resizeCtrlIsDragging > -1) {\n            this._resizeCtrlIsDragging = -1;\n            this._events.trigger('area-resize-end');\n        }\n        this._areaIsHover = false;\n        this._resizeCtrlIsHover = -1;\n\n        this._posDragStartX = 0;\n        this._posDragStartY = 0;\n    }\n}","import {CropCanvas} from \"./crop-canvas\";\n\nexport enum CropAreaType {\n  Square = 'square',\n  Circle = 'circle'\n}\n\nexport abstract class CropArea {\n  protected _minSize = 80;\n  protected _cropCanvas: CropCanvas;\n  protected _image = new Image();\n  protected _x = 0;\n  protected _y = 0;\n  protected _size = 200;\n\n  constructor(protected _ctx, protected _events) {\n    this._cropCanvas = new CropCanvas(_ctx);\n  }\n\n  getImage() {\n    return this._image;\n  }\n\n  setImage(image) {\n    this._image = image;\n  };\n\n  getX() {\n    return this._x;\n  };\n\n  setX(x) {\n    this._x = x;\n    this._dontDragOutside();\n  };\n\n  getY() {\n    return this._y;\n  };\n\n  setY(y) {\n    this._y = y;\n    this._dontDragOutside();\n  };\n\n  getSize() : number {\n    return this._size;\n  };\n\n  setSize(size) {\n    this._size = Math.max(this._minSize, size);\n    this._dontDragOutside();\n  };\n\n  getMinSize() {\n    return this._minSize;\n  };\n\n  setMinSize(size) {\n    this._minSize = size;\n    this._size = Math.max(this._minSize, this._size);\n    this._dontDragOutside();\n  };\n\n  _dontDragOutside() {\n    var h = this._ctx.canvas.height,\n      w = this._ctx.canvas.width;\n    if (this._size > w) {\n      this._size = w;\n    }\n    if (this._size > h) {\n      this._size = h;\n    }\n    if (this._x < this._size / 2) {\n      this._x = this._size / 2;\n    }\n    if (this._x > w - this._size / 2) {\n      this._x = w - this._size / 2;\n    }\n    if (this._y < this._size / 2) {\n      this._y = this._size / 2;\n    }\n    if (this._y > h - this._size / 2) {\n      this._y = h - this._size / 2;\n    }\n  };\n\n  abstract _drawArea(ctx, centerCoords, size);\n\n  draw() {\n    this._cropCanvas.drawCropArea(this._image, [this._x, this._y], this._size, this._drawArea);\n  };\n\n  abstract processMouseMove(mouseCurX: number, mouseCurY: number);\n\n  abstract processMouseDown(mouseDownX: number, mouseDownY: number);\n\n  abstract processMouseUp(mouseDownX: number, mouseDownY: number);\n}","export class CropCanvas {\n    // Shape = Array of [x,y]; [0, 0] - center\n    shapeArrowNW = [[-0.5, -2], [-3, -4.5], [-0.5, -7], [-7, -7], [-7, -0.5], [-4.5, -3], [-2, -0.5]];\n    shapeArrowNE = [[0.5, -2], [3, -4.5], [0.5, -7], [7, -7], [7, -0.5], [4.5, -3], [2, -0.5]];\n    shapeArrowSW = [[-0.5, 2], [-3, 4.5], [-0.5, 7], [-7, 7], [-7, 0.5], [-4.5, 3], [-2, 0.5]];\n    shapeArrowSE = [[0.5, 2], [3, 4.5], [0.5, 7], [7, 7], [7, 0.5], [4.5, 3], [2, 0.5]];\n    shapeArrowN = [[-1.5, -2.5], [-1.5, -6], [-5, -6], [0, -11], [5, -6], [1.5, -6], [1.5, -2.5]];\n    shapeArrowW = [[-2.5, -1.5], [-6, -1.5], [-6, -5], [-11, 0], [-6, 5], [-6, 1.5], [-2.5, 1.5]];\n    shapeArrowS = [[-1.5, 2.5], [-1.5, 6], [-5, 6], [0, 11], [5, 6], [1.5, 6], [1.5, 2.5]];\n    shapeArrowE = [[2.5, -1.5], [6, -1.5], [6, -5], [11, 0], [6, 5], [6, 1.5], [2.5, 1.5]];\n\n    // Colors\n    colors = {\n        areaOutline: '#fff',\n        resizeBoxStroke: '#fff',\n        resizeBoxFill: '#444',\n        resizeBoxArrowFill: '#fff',\n        resizeCircleStroke: '#fff',\n        resizeCircleFill: '#444',\n        moveIconFill: '#fff'\n    };\n\n    constructor(private ctx) {}\n\n    // Calculate Point\n    calcPoint(point, offset, scale) {\n        return [scale * point[0] + offset[0], scale * point[1] + offset[1]];\n    };\n\n    // Draw Filled Polygon\n    private drawFilledPolygon(shape, fillStyle, centerCoords, scale) {\n        this.ctx.save();\n        this.ctx.fillStyle = fillStyle;\n        this.ctx.beginPath();\n        var pc, pc0 = this.calcPoint(shape[0], centerCoords, scale);\n        this.ctx.moveTo(pc0[0], pc0[1]);\n\n        for (var p in shape) {\n            let pNum = parseInt(p, 10);\n            if (pNum > 0) {\n                pc = this.calcPoint(shape[pNum], centerCoords, scale);\n                this.ctx.lineTo(pc[0], pc[1]);\n            }\n        }\n\n        this.ctx.lineTo(pc0[0], pc0[1]);\n        this.ctx.fill();\n        this.ctx.closePath();\n        this.ctx.restore();\n    };\n\n    /* Icons */\n\n    drawIconMove(centerCoords, scale) {\n        this.drawFilledPolygon(this.shapeArrowN, this.colors.moveIconFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowW, this.colors.moveIconFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowS, this.colors.moveIconFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowE, this.colors.moveIconFill, centerCoords, scale);\n    }\n\n    drawIconResizeCircle(centerCoords, circleRadius, scale) {\n        var scaledCircleRadius = circleRadius * scale;\n        this.ctx.save();\n        this.ctx.strokeStyle = this.colors.resizeCircleStroke;\n        this.ctx.lineWidth = 2;\n        this.ctx.fillStyle = this.colors.resizeCircleFill;\n        this.ctx.beginPath();\n        this.ctx.arc(centerCoords[0], centerCoords[1], scaledCircleRadius, 0, 2 * Math.PI);\n        this.ctx.fill();\n        this.ctx.stroke();\n        this.ctx.closePath();\n        this.ctx.restore();\n    }\n\n    drawIconResizeBoxBase (centerCoords, boxSize, scale) {\n        var scaledBoxSize = boxSize * scale;\n        this.ctx.save();\n        this.ctx.strokeStyle = this.colors.resizeBoxStroke;\n        this.ctx.lineWidth = 2;\n        this.ctx.fillStyle = this.colors.resizeBoxFill;\n        this.ctx.fillRect(centerCoords[0] - scaledBoxSize / 2, centerCoords[1] - scaledBoxSize / 2, scaledBoxSize, scaledBoxSize);\n        this.ctx.strokeRect(centerCoords[0] - scaledBoxSize / 2, centerCoords[1] - scaledBoxSize / 2, scaledBoxSize, scaledBoxSize);\n        this.ctx.restore();\n    }\n    drawIconResizeBoxNESW(centerCoords, boxSize, scale) {\n        this.drawIconResizeBoxBase(centerCoords, boxSize, scale);\n        this.drawFilledPolygon(this.shapeArrowNE, this.colors.resizeBoxArrowFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowSW, this.colors.resizeBoxArrowFill, centerCoords, scale);\n    }\n    drawIconResizeBoxNWSE(centerCoords, boxSize, scale) {\n        this.drawIconResizeBoxBase(centerCoords, boxSize, scale);\n        this.drawFilledPolygon(this.shapeArrowNW, this.colors.resizeBoxArrowFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowSE, this.colors.resizeBoxArrowFill, centerCoords, scale);\n    }\n\n    /* Crop Area */\n\n    drawCropArea(image, centerCoords, size, fnDrawClipPath) {\n        var xRatio = image.width / this.ctx.canvas.width,\n            yRatio = image.height / this.ctx.canvas.height,\n            xLeft = centerCoords[0] - size / 2,\n            yTop = centerCoords[1] - size / 2;\n\n        this.ctx.save();\n        this.ctx.strokeStyle = this.colors.areaOutline;\n        this.ctx.lineWidth = 2;\n        this.ctx.beginPath();\n        fnDrawClipPath(this.ctx, centerCoords, size);\n        this.ctx.stroke();\n        this.ctx.clip();\n\n        // draw part of original image\n        if (size > 0) {\n            this.ctx.drawImage(image, xLeft * xRatio, yTop * yRatio, size * xRatio, size * yRatio, xLeft, yTop, size, size);\n        }\n\n        this.ctx.beginPath();\n        fnDrawClipPath(this.ctx, centerCoords, size);\n        this.ctx.stroke();\n        this.ctx.clip();\n\n        this.ctx.restore();\n    };\n}","/**\n * EXIF service is based on the exif-js library (https://github.com/jseidelin/exif-js)\n */\nexport class CropEXIF {\n\n    static ExifTags = {\n\n        // version tags\n        0x9000: \"ExifVersion\",             // EXIF version\n        0xA000: \"FlashpixVersion\",         // Flashpix format version\n\n        // colorspace tags\n        0xA001: \"ColorSpace\",              // Color space information tag\n\n        // image configuration\n        0xA002: \"PixelXDimension\",         // Valid width of meaningful image\n        0xA003: \"PixelYDimension\",         // Valid height of meaningful image\n        0x9101: \"ComponentsConfiguration\", // Information about channels\n        0x9102: \"CompressedBitsPerPixel\",  // Compressed bits per pixel\n\n        // user information\n        0x927C: \"MakerNote\",               // Any desired information written by the manufacturer\n        0x9286: \"UserComment\",             // Comments by user\n\n        // related file\n        0xA004: \"RelatedSoundFile\",        // Name of related sound file\n\n        // date and time\n        0x9003: \"DateTimeOriginal\",        // Date and time when the original image was generated\n        0x9004: \"DateTimeDigitized\",       // Date and time when the image was stored digitally\n        0x9290: \"SubsecTime\",              // Fractions of seconds for DateTime\n        0x9291: \"SubsecTimeOriginal\",      // Fractions of seconds for DateTimeOriginal\n        0x9292: \"SubsecTimeDigitized\",     // Fractions of seconds for DateTimeDigitized\n\n        // picture-taking conditions\n        0x829A: \"ExposureTime\",            // Exposure time (in seconds)\n        0x829D: \"FNumber\",                 // F number\n        0x8822: \"ExposureProgram\",         // Exposure program\n        0x8824: \"SpectralSensitivity\",     // Spectral sensitivity\n        0x8827: \"ISOSpeedRatings\",         // ISO speed rating\n        0x8828: \"OECF\",                    // Optoelectric conversion factor\n        0x9201: \"ShutterSpeedValue\",       // Shutter speed\n        0x9202: \"ApertureValue\",           // Lens aperture\n        0x9203: \"BrightnessValue\",         // Value of brightness\n        0x9204: \"ExposureBias\",            // Exposure bias\n        0x9205: \"MaxApertureValue\",        // Smallest F number of lens\n        0x9206: \"SubjectDistance\",         // Distance to subject in meters\n        0x9207: \"MeteringMode\",            // Metering mode\n        0x9208: \"LightSource\",             // Kind of light source\n        0x9209: \"Flash\",                   // Flash status\n        0x9214: \"SubjectArea\",             // Location and area of main subject\n        0x920A: \"FocalLength\",             // Focal length of the lens in mm\n        0xA20B: \"FlashEnergy\",             // Strobe energy in BCPS\n        0xA20C: \"SpatialFrequencyResponse\",    //\n        0xA20E: \"FocalPlaneXResolution\",   // Number of pixels in width direction per FocalPlaneResolutionUnit\n        0xA20F: \"FocalPlaneYResolution\",   // Number of pixels in height direction per FocalPlaneResolutionUnit\n        0xA210: \"FocalPlaneResolutionUnit\",    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\n        0xA214: \"SubjectLocation\",         // Location of subject in image\n        0xA215: \"ExposureIndex\",           // Exposure index selected on camera\n        0xA217: \"SensingMethod\",           // Image sensor type\n        0xA300: \"FileSource\",              // Image source (3 == DSC)\n        0xA301: \"SceneType\",               // Scene type (1 == directly photographed)\n        0xA302: \"CFAPattern\",              // Color filter array geometric pattern\n        0xA401: \"CustomRendered\",          // Special processing\n        0xA402: \"ExposureMode\",            // Exposure mode\n        0xA403: \"WhiteBalance\",            // 1 = auto white balance, 2 = manual\n        0xA404: \"DigitalZoomRation\",       // Digital zoom ratio\n        0xA405: \"FocalLengthIn35mmFilm\",   // Equivalent foacl length assuming 35mm film camera (in mm)\n        0xA406: \"SceneCaptureType\",        // Type of scene\n        0xA407: \"GainControl\",             // Degree of overall image gain adjustment\n        0xA408: \"Contrast\",                // Direction of contrast processing applied by camera\n        0xA409: \"Saturation\",              // Direction of saturation processing applied by camera\n        0xA40A: \"Sharpness\",               // Direction of sharpness processing applied by camera\n        0xA40B: \"DeviceSettingDescription\",    //\n        0xA40C: \"SubjectDistanceRange\",    // Distance to subject\n\n        // other tags\n        0xA005: \"InteroperabilityIFDPointer\",\n        0xA420: \"ImageUniqueID\"            // Identifier assigned uniquely to each image\n    };\n\n    static TiffTags = {\n        0x0100: \"ImageWidth\",\n        0x0101: \"ImageHeight\",\n        0x8769: \"ExifIFDPointer\",\n        0x8825: \"GPSInfoIFDPointer\",\n        0xA005: \"InteroperabilityIFDPointer\",\n        0x0102: \"BitsPerSample\",\n        0x0103: \"Compression\",\n        0x0106: \"PhotometricInterpretation\",\n        0x0112: \"Orientation\",\n        0x0115: \"SamplesPerPixel\",\n        0x011C: \"PlanarConfiguration\",\n        0x0212: \"YCbCrSubSampling\",\n        0x0213: \"YCbCrPositioning\",\n        0x011A: \"XResolution\",\n        0x011B: \"YResolution\",\n        0x0128: \"ResolutionUnit\",\n        0x0111: \"StripOffsets\",\n        0x0116: \"RowsPerStrip\",\n        0x0117: \"StripByteCounts\",\n        0x0201: \"JPEGInterchangeFormat\",\n        0x0202: \"JPEGInterchangeFormatLength\",\n        0x012D: \"TransferFunction\",\n        0x013E: \"WhitePoint\",\n        0x013F: \"PrimaryChromaticities\",\n        0x0211: \"YCbCrCoefficients\",\n        0x0214: \"ReferenceBlackWhite\",\n        0x0132: \"DateTime\",\n        0x010E: \"ImageDescription\",\n        0x010F: \"Make\",\n        0x0110: \"Model\",\n        0x0131: \"Software\",\n        0x013B: \"Artist\",\n        0x8298: \"Copyright\"\n    };\n\n    static GPSTags = {\n        0x0000: \"GPSVersionID\",\n        0x0001: \"GPSLatitudeRef\",\n        0x0002: \"GPSLatitude\",\n        0x0003: \"GPSLongitudeRef\",\n        0x0004: \"GPSLongitude\",\n        0x0005: \"GPSAltitudeRef\",\n        0x0006: \"GPSAltitude\",\n        0x0007: \"GPSTimeStamp\",\n        0x0008: \"GPSSatellites\",\n        0x0009: \"GPSStatus\",\n        0x000A: \"GPSMeasureMode\",\n        0x000B: \"GPSDOP\",\n        0x000C: \"GPSSpeedRef\",\n        0x000D: \"GPSSpeed\",\n        0x000E: \"GPSTrackRef\",\n        0x000F: \"GPSTrack\",\n        0x0010: \"GPSImgDirectionRef\",\n        0x0011: \"GPSImgDirection\",\n        0x0012: \"GPSMapDatum\",\n        0x0013: \"GPSDestLatitudeRef\",\n        0x0014: \"GPSDestLatitude\",\n        0x0015: \"GPSDestLongitudeRef\",\n        0x0016: \"GPSDestLongitude\",\n        0x0017: \"GPSDestBearingRef\",\n        0x0018: \"GPSDestBearing\",\n        0x0019: \"GPSDestDistanceRef\",\n        0x001A: \"GPSDestDistance\",\n        0x001B: \"GPSProcessingMethod\",\n        0x001C: \"GPSAreaInformation\",\n        0x001D: \"GPSDateStamp\",\n        0x001E: \"GPSDifferential\"\n    };\n\n    static StringValues = {\n        ExposureProgram: {\n            0: \"Not defined\",\n            1: \"Manual\",\n            2: \"Normal program\",\n            3: \"Aperture priority\",\n            4: \"Shutter priority\",\n            5: \"Creative program\",\n            6: \"Action program\",\n            7: \"Portrait mode\",\n            8: \"Landscape mode\"\n        },\n        MeteringMode: {\n            0: \"Unknown\",\n            1: \"Average\",\n            2: \"CenterWeightedAverage\",\n            3: \"Spot\",\n            4: \"MultiSpot\",\n            5: \"Pattern\",\n            6: \"Partial\",\n            255: \"Other\"\n        },\n        LightSource: {\n            0: \"Unknown\",\n            1: \"Daylight\",\n            2: \"Fluorescent\",\n            3: \"Tungsten (incandescent light)\",\n            4: \"Flash\",\n            9: \"Fine weather\",\n            10: \"Cloudy weather\",\n            11: \"Shade\",\n            12: \"Daylight fluorescent (D 5700 - 7100K)\",\n            13: \"Day white fluorescent (N 4600 - 5400K)\",\n            14: \"Cool white fluorescent (W 3900 - 4500K)\",\n            15: \"White fluorescent (WW 3200 - 3700K)\",\n            17: \"Standard light A\",\n            18: \"Standard light B\",\n            19: \"Standard light C\",\n            20: \"D55\",\n            21: \"D65\",\n            22: \"D75\",\n            23: \"D50\",\n            24: \"ISO studio tungsten\",\n            255: \"Other\"\n        },\n        Flash: {\n            0x0000: \"Flash did not fire\",\n            0x0001: \"Flash fired\",\n            0x0005: \"Strobe return light not detected\",\n            0x0007: \"Strobe return light detected\",\n            0x0009: \"Flash fired, compulsory flash mode\",\n            0x000D: \"Flash fired, compulsory flash mode, return light not detected\",\n            0x000F: \"Flash fired, compulsory flash mode, return light detected\",\n            0x0010: \"Flash did not fire, compulsory flash mode\",\n            0x0018: \"Flash did not fire, auto mode\",\n            0x0019: \"Flash fired, auto mode\",\n            0x001D: \"Flash fired, auto mode, return light not detected\",\n            0x001F: \"Flash fired, auto mode, return light detected\",\n            0x0020: \"No flash function\",\n            0x0041: \"Flash fired, red-eye reduction mode\",\n            0x0045: \"Flash fired, red-eye reduction mode, return light not detected\",\n            0x0047: \"Flash fired, red-eye reduction mode, return light detected\",\n            0x0049: \"Flash fired, compulsory flash mode, red-eye reduction mode\",\n            0x004D: \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\n            0x004F: \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\n            0x0059: \"Flash fired, auto mode, red-eye reduction mode\",\n            0x005D: \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\n            0x005F: \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\n        },\n        SensingMethod: {\n            1: \"Not defined\",\n            2: \"One-chip color area sensor\",\n            3: \"Two-chip color area sensor\",\n            4: \"Three-chip color area sensor\",\n            5: \"Color sequential area sensor\",\n            7: \"Trilinear sensor\",\n            8: \"Color sequential linear sensor\"\n        },\n        SceneCaptureType: {\n            0: \"Standard\",\n            1: \"Landscape\",\n            2: \"Portrait\",\n            3: \"Night scene\"\n        },\n        SceneType: {\n            1: \"Directly photographed\"\n        },\n        CustomRendered: {\n            0: \"Normal process\",\n            1: \"Custom process\"\n        },\n        WhiteBalance: {\n            0: \"Auto white balance\",\n            1: \"Manual white balance\"\n        },\n        GainControl: {\n            0: \"None\",\n            1: \"Low gain up\",\n            2: \"High gain up\",\n            3: \"Low gain down\",\n            4: \"High gain down\"\n        },\n        Contrast: {\n            0: \"Normal\",\n            1: \"Soft\",\n            2: \"Hard\"\n        },\n        Saturation: {\n            0: \"Normal\",\n            1: \"Low saturation\",\n            2: \"High saturation\"\n        },\n        Sharpness: {\n            0: \"Normal\",\n            1: \"Soft\",\n            2: \"Hard\"\n        },\n        SubjectDistanceRange: {\n            0: \"Unknown\",\n            1: \"Macro\",\n            2: \"Close view\",\n            3: \"Distant view\"\n        },\n        FileSource: {\n            3: \"DSC\"\n        },\n\n        Components: {\n            0: \"\",\n            1: \"Y\",\n            2: \"Cb\",\n            3: \"Cr\",\n            4: \"R\",\n            5: \"G\",\n            6: \"B\"\n        }\n    };\n\n    static IptcFieldMap = {\n        0x78: 'caption',\n        0x6E: 'credit',\n        0x19: 'keywords',\n        0x37: 'dateCreated',\n        0x50: 'byline',\n        0x55: 'bylineTitle',\n        0x7A: 'captionWriter',\n        0x69: 'headline',\n        0x74: 'copyright',\n        0x0F: 'category'\n    };\n\n    static readIPTCData(file, startOffset, sectionLength) {\n        var dataView = new DataView(file);\n        var data = {};\n        var fieldValue, fieldName, dataSize, segmentType, segmentSize;\n        var segmentStartPos = startOffset;\n        while (segmentStartPos < startOffset + sectionLength) {\n            if (dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos + 1) === 0x02) {\n                segmentType = dataView.getUint8(segmentStartPos + 2);\n                if (segmentType in CropEXIF.IptcFieldMap) {\n                    dataSize = dataView.getInt16(segmentStartPos + 3);\n                    segmentSize = dataSize + 5;\n                    fieldName = CropEXIF.IptcFieldMap[segmentType];\n                    fieldValue = CropEXIF.getStringFromDB(dataView, segmentStartPos + 5, dataSize);\n                    // Check if we already stored a value with this name\n                    if (data.hasOwnProperty(fieldName)) {\n                        // Value already stored with this name, create multivalue field\n                        if (data[fieldName] instanceof Array) {\n                            data[fieldName].push(fieldValue);\n                        }\n                        else {\n                            data[fieldName] = [data[fieldName], fieldValue];\n                        }\n                    }\n                    else {\n                        data[fieldName] = fieldValue;\n                    }\n                }\n\n            }\n            segmentStartPos++;\n        }\n        return data;\n    }\n\n    static readTags(file, tiffStart, dirStart, strings, bigEnd) : {[key: string]: any} {\n        var entries = file.getUint16(dirStart, !bigEnd),\n            tags = {},\n            entryOffset, tag,\n            i;\n\n        for (i = 0; i < entries; i++) {\n            entryOffset = dirStart + i * 12 + 2;\n            tag = strings[file.getUint16(entryOffset, !bigEnd)];\n            if (tag) {\n                tags[tag] = CropEXIF.readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\n            } else {\n                console.warn('Unknown tag: ' + file.getUint16(entryOffset, !bigEnd));\n            }\n        }\n        return tags;\n    }\n\n    static readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {\n        var type = file.getUint16(entryOffset + 2, !bigEnd),\n            numValues = file.getUint32(entryOffset + 4, !bigEnd),\n            valueOffset = file.getUint32(entryOffset + 8, !bigEnd) + tiffStart,\n            offset,\n            vals, val, n,\n            numerator, denominator;\n\n        switch (type) {\n            case 1: // byte, 8-bit unsigned int\n            case 7: // undefined, 8-bit byte, value depending on field\n                if (numValues == 1) {\n                    return file.getUint8(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n = 0; n < numValues; n++) {\n                        vals[n] = file.getUint8(offset + n);\n                    }\n                    return vals;\n                }\n\n            case 2: // ascii, 8-bit byte\n                offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                return this.getStringFromDB(file, offset, numValues - 1);\n\n            case 3: // short, 16 bit int\n                if (numValues == 1) {\n                    return file.getUint16(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 2 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n = 0; n < numValues; n++) {\n                        vals[n] = file.getUint16(offset + 2 * n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 4: // long, 32 bit int\n                if (numValues == 1) {\n                    return file.getUint32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n = 0; n < numValues; n++) {\n                        vals[n] = file.getUint32(valueOffset + 4 * n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 5:    // rational = two long values, first is numerator, second is denominator\n                if (numValues == 1) {\n                    numerator = file.getUint32(valueOffset, !bigEnd);\n                    denominator = file.getUint32(valueOffset + 4, !bigEnd);\n                    val = new Number(numerator / denominator);\n                    val.numerator = numerator;\n                    val.denominator = denominator;\n                    return val;\n                } else {\n                    vals = [];\n                    for (n = 0; n < numValues; n++) {\n                        numerator = file.getUint32(valueOffset + 8 * n, !bigEnd);\n                        denominator = file.getUint32(valueOffset + 4 + 8 * n, !bigEnd);\n                        vals[n] = new Number(numerator / denominator);\n                        vals[n].numerator = numerator;\n                        vals[n].denominator = denominator;\n                    }\n                    return vals;\n                }\n\n            case 9: // slong, 32 bit signed int\n                if (numValues == 1) {\n                    return file.getInt32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n = 0; n < numValues; n++) {\n                        vals[n] = file.getInt32(valueOffset + 4 * n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 10: // signed rational, two slongs, first is numerator, second is denominator\n                if (numValues == 1) {\n                    return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset + 4, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n = 0; n < numValues; n++) {\n                        vals[n] = file.getInt32(valueOffset + 8 * n, !bigEnd) / file.getInt32(valueOffset + 4 + 8 * n, !bigEnd);\n                    }\n                    return vals;\n                }\n        }\n    }\n\n    static addEvent(element, event, handler) {\n        if (element.addEventListener) {\n            element.addEventListener(event, handler, false);\n        } else if (element.attachEvent) {\n            element.attachEvent(\"on\" + event, handler);\n        }\n    }\n\n    static objectURLToBlob(url, callback) {\n        var http = new XMLHttpRequest();\n        http.open(\"GET\", url, true);\n        http.responseType = \"blob\";\n        http.onload = function (e) {\n            if (this.status == 200 || this.status === 0) {\n                callback(this.response);\n            }\n        };\n        http.send();\n    }\n\n    static handleBinaryFile(binFile, img, callback?) {\n        var data = CropEXIF.findEXIFinJPEG(binFile);\n        var iptcdata = CropEXIF.findIPTCinJPEG(binFile);\n        img.exifdata = data || {};\n        img.iptcdata = iptcdata || {};\n        if (callback) {\n            callback.call(img);\n        }\n    }\n\n    static getImageData(img, callback) {\n        if (img.src) {\n            if (/^data\\:/i.test(img.src)) { // Data URI\n                var arrayBuffer = CropEXIF.base64ToArrayBuffer(img.src);\n                this.handleBinaryFile(arrayBuffer, img, callback);\n\n            } else if (/^blob\\:/i.test(img.src)) { // Object URL\n                var fileReader = new FileReader();\n                fileReader.onload = (e) => {\n                    this.handleBinaryFile(e.target.result, img, callback);\n                };\n                CropEXIF.objectURLToBlob(img.src, function (blob) {\n                    fileReader.readAsArrayBuffer(blob);\n                });\n            } else {\n                var http = new XMLHttpRequest();\n                const self = this;\n                http.onload = function () {\n                    if (this.status == 200 || this.status === 0) {\n                        self.handleBinaryFile(http.response, img, callback);\n                    } else {\n                        throw \"Could not load image\";\n                    }\n                    http = null;\n                };\n                http.open(\"GET\", img.src, true);\n                http.responseType = \"arraybuffer\";\n                http.send(null);\n            }\n        } else if (FileReader && (img instanceof window.Blob || img instanceof File)) {\n            var fileReader = new FileReader();\n            fileReader.onload = e => {\n                console.debug('getImageData: Got file of length %o', e.target.result.byteLength);\n                this.handleBinaryFile(e.target.result, img, callback);\n            };\n\n            fileReader.readAsArrayBuffer(img);\n        }\n    }\n\n    static getStringFromDB(buffer, start, length) {\n        var outstr = \"\";\n        for (var n = start; n < start + length; n++) {\n            outstr += String.fromCharCode(buffer.getUint8(n));\n        }\n        return outstr;\n    }\n\n    static readEXIFData(file, start) {\n        if (this.getStringFromDB(file, start, 4) != \"Exif\") {\n            console.error(\"Not valid EXIF data! \" + this.getStringFromDB(file, start, 4));\n            return false;\n        }\n\n        var bigEnd,\n            tags,\n            exifData, gpsData,\n            tiffOffset = start + 6;\n        let tag: string;\n\n        // test for TIFF validity and endianness\n        if (file.getUint16(tiffOffset) == 0x4949) {\n            bigEnd = false;\n        } else if (file.getUint16(tiffOffset) == 0x4D4D) {\n            bigEnd = true;\n        } else {\n            console.error(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n            return false;\n        }\n\n        if (file.getUint16(tiffOffset + 2, !bigEnd) != 0x002A) {\n            console.error(\"Not valid TIFF data! (no 0x002A)\");\n            return false;\n        }\n\n        var firstIFDOffset = file.getUint32(tiffOffset + 4, !bigEnd);\n\n        if (firstIFDOffset < 0x00000008) {\n            console.error(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset + 4, !bigEnd));\n            return false;\n        }\n\n        tags = CropEXIF.readTags(file, tiffOffset, tiffOffset + firstIFDOffset, this.TiffTags, bigEnd);\n\n        if (tags.ExifIFDPointer) {\n            exifData = CropEXIF.readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, this.ExifTags, bigEnd);\n            for (tag in exifData) {\n                switch (tag) {\n                    case \"LightSource\" :\n                    case \"Flash\" :\n                    case \"MeteringMode\" :\n                    case \"ExposureProgram\" :\n                    case \"SensingMethod\" :\n                    case \"SceneCaptureType\" :\n                    case \"SceneType\" :\n                    case \"CustomRendered\" :\n                    case \"WhiteBalance\" :\n                    case \"GainControl\" :\n                    case \"Contrast\" :\n                    case \"Saturation\" :\n                    case \"Sharpness\" :\n                    case \"SubjectDistanceRange\" :\n                    case \"FileSource\" :\n                        exifData[tag] = this.StringValues[tag][exifData[tag]];\n                        break;\n\n                    case \"ExifVersion\" :\n                    case \"FlashpixVersion\" :\n                        exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\n                        break;\n\n                    case \"ComponentsConfiguration\" :\n                        exifData[tag] =\n                            this.StringValues.Components[exifData[tag][0]] +\n                            this.StringValues.Components[exifData[tag][1]] +\n                            this.StringValues.Components[exifData[tag][2]] +\n                            this.StringValues.Components[exifData[tag][3]];\n                        break;\n                }\n                tags[tag] = exifData[tag];\n            }\n        }\n\n        if (tags.GPSInfoIFDPointer) {\n            gpsData = this.readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, this.GPSTags, bigEnd);\n            for (tag in gpsData) {\n                switch (tag) {\n                    case \"GPSVersionID\" :\n                        gpsData[tag] = gpsData[tag][0] +\n                            \".\" + gpsData[tag][1] +\n                            \".\" + gpsData[tag][2] +\n                            \".\" + gpsData[tag][3];\n                        break;\n                }\n                tags[tag] = gpsData[tag];\n            }\n        }\n\n        return tags;\n    }\n\n    static getData(img, callback) {\n        if ((img instanceof Image || img instanceof HTMLImageElement) && !img.complete) return false;\n\n        if (!this.imageHasData(img)) {\n            CropEXIF.getImageData(img, callback);\n        } else {\n            if (callback) {\n                callback.call(img);\n            }\n        }\n        return true;\n    };\n\n    static getTag(img, tag) {\n        if (!this.imageHasData(img)) return;\n        return img.exifdata[tag];\n    };\n\n    static getAllTags(img) {\n        if (!this.imageHasData(img)) return {};\n        var a,\n            data = img.exifdata,\n            tags = {};\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                tags[a] = data[a];\n            }\n        }\n        return tags;\n    };\n\n    static pretty(img) {\n        if (!this.imageHasData(img)) return \"\";\n        var a,\n            data = img.exifdata,\n            strPretty = \"\";\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                if (typeof data[a] == \"object\") {\n                    if (data[a] instanceof Number) {\n                        strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\n                    } else {\n                        strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\n                    }\n                } else {\n                    strPretty += a + \" : \" + data[a] + \"\\r\\n\";\n                }\n            }\n        }\n        return strPretty;\n    }\n\n\n    static findEXIFinJPEG(file) {\n        var dataView = new DataView(file);\n        var maxOffset = dataView.byteLength - 4;\n\n        console.debug('findEXIFinJPEG: Got file of length %o', file.byteLength);\n        if (dataView.getUint16(0) !== 0xffd8) {\n            console.warn('Not a valid JPEG');\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2;\n        var marker;\n\n        function readByte() {\n            var someByte = dataView.getUint8(offset);\n            offset++;\n            return someByte;\n        }\n\n        function readWord() {\n            var someWord = dataView.getUint16(offset);\n            offset = offset + 2;\n            return someWord;\n        }\n\n        while (offset < maxOffset) {\n            var someByte = readByte();\n            if (someByte != 0xFF) {\n                console.error('Not a valid marker at offset ' + offset + \", found: \" + someByte);\n                return false; // not a valid marker, something is wrong\n            }\n            marker = readByte();\n            console.debug('Marker=%o', marker);\n\n            // we could implement handling for other markers here,\n            // but we're only looking for 0xFFE1 for EXIF data\n\n            var segmentLength = readWord() - 2;\n            switch (marker) {\n                case 0xE1:\n                    return this.readEXIFData(dataView, offset/*, segmentLength*/);\n                case 0xE0: // JFIF\n                default:\n                    offset += segmentLength;\n            }\n        }\n    }\n\n    static findIPTCinJPEG(file) {\n        var dataView = new DataView(file);\n\n        console.debug('Got file of length ' + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n            console.warn('Not a valid JPEG');\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength;\n\n\n        var isFieldSegmentStart = function (dataView, offset) {\n            return (\n                dataView.getUint8(offset) === 0x38 &&\n                dataView.getUint8(offset + 1) === 0x42 &&\n                dataView.getUint8(offset + 2) === 0x49 &&\n                dataView.getUint8(offset + 3) === 0x4D &&\n                dataView.getUint8(offset + 4) === 0x04 &&\n                dataView.getUint8(offset + 5) === 0x04\n            );\n        };\n\n        while (offset < length) {\n            if (isFieldSegmentStart(dataView, offset)) {\n                // Get the length of the name header (which is padded to an even number of bytes)\n                var nameHeaderLength = dataView.getUint8(offset + 7);\n                if (nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\n                // Check for pre photoshop 6 format\n                if (nameHeaderLength === 0) {\n                    // Always 4\n                    nameHeaderLength = 4;\n                }\n\n                var startOffset = offset + 8 + nameHeaderLength;\n                var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\n\n                return this.readIPTCData(file, startOffset, sectionLength);\n            }\n\n            // Not the marker, continue searching\n            offset++;\n        }\n    }\n\n    static readFromBinaryFile(file) {\n        return this.findEXIFinJPEG(file);\n    }\n\n    static imageHasData(img) {\n        return !!(img.exifdata);\n    }\n\n    static base64ToArrayBuffer(base64, contentType?) {\n        contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\n        base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n        var binary = atob(base64);\n        var len = binary.length;\n        var buffer = new ArrayBuffer(len);\n        var view = new Uint8Array(buffer);\n        for (var i = 0; i < len; i++) {\n            view[i] = binary.charCodeAt(i);\n        }\n        return buffer;\n    }\n}","import {CropEXIF} from \"./crop-exif\";\nimport {CropAreaCircle} from \"./crop-area-circle\";\nimport {CropAreaSquare} from \"./crop-area-square\";\nimport {CropAreaType, CropArea} from \"./crop-area\";\nimport {CropAreaDetails} from \"../fc-img-crop.component\";\n\nexport class CropHost {\n\n  ctx = null;\n  image = null;\n\n  cropArea: CropArea;\n\n  // Dimensions\n  minCanvasDims = [100, 100];\n  maxCanvasDims = [300, 300];\n\n  resultImageSize = 200;\n  resultImageFormat = 'image/png';\n\n  resultImageQuality;\n\n  private element: any;\n\n  constructor(private elCanvas, private opts, private events) {\n    this.element = elCanvas.parentElement;\n\n    this.ctx = elCanvas.getContext('2d');\n\n    this.cropArea = new CropAreaCircle(this.ctx, events);\n\n    document.addEventListener('mousemove', this.onMouseMove.bind(this));\n    elCanvas.addEventListener('mousedown', this.onMouseDown.bind(this));\n    document.addEventListener('mouseup', this.onMouseUp.bind(this));\n\n    document.addEventListener('touchmove', this.onMouseMove.bind(this));\n    elCanvas.addEventListener('touchstart', this.onMouseDown.bind(this));\n    document.addEventListener('touchend', this.onMouseUp.bind(this));\n  }\n\n  destroy() {\n    document.removeEventListener('mousemove', this.onMouseMove);\n    this.elCanvas.removeEventListener('mousedown', this.onMouseDown);\n    document.removeEventListener('mouseup', this.onMouseMove);\n\n    document.removeEventListener('touchmove', this.onMouseMove);\n    this.elCanvas.removeEventListener('touchstart', this.onMouseDown);\n    document.removeEventListener('touchend', this.onMouseMove);\n\n    this.elCanvas.remove();\n  }\n\n  drawScene() {\n    // clear canvas\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n\n    if (this.image !== null) {\n      // draw source this.image\n      this.ctx.drawImage(this.image, 0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n      this.ctx.save();\n\n      // and make it darker\n      this.ctx.fillStyle = 'rgba(0, 0, 0, 0.65)';\n      this.ctx.fillRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n\n      this.ctx.restore();\n\n      this.cropArea.draw();\n    }\n  }\n\n  resetCropHost(cw?, ch?) {\n    if (this.image !== null) {\n      this.cropArea.setImage(this.image);\n      var imageWidth = this.image.width || cw;\n      var imageHeight = this.image.height || ch;\n      var imageDims = [imageWidth, imageHeight];\n\n      // Compute canvas dimensions to fit full display into host\n      var imageRatio = imageWidth / imageHeight;\n      var canvasDims = imageDims;\n      if (canvasDims[0] > this.maxCanvasDims[0]) {\n        canvasDims[0] = this.maxCanvasDims[0];\n        canvasDims[1] = canvasDims[0] / imageRatio;\n      } else if (canvasDims[0] < this.minCanvasDims[0]) {\n        canvasDims[0] = this.minCanvasDims[0];\n        canvasDims[1] = canvasDims[0] / imageRatio;\n      }\n      if (canvasDims[1] > this.maxCanvasDims[1]) {\n        canvasDims[1] = this.maxCanvasDims[1];\n        canvasDims[0] = canvasDims[1] * imageRatio;\n      } else if (canvasDims[1] < this.minCanvasDims[1]) {\n        canvasDims[1] = this.minCanvasDims[1];\n        canvasDims[0] = canvasDims[1] * imageRatio;\n      }\n      var w = Math.floor(canvasDims[0]);\n      var h = Math.floor(canvasDims[1]);\n      canvasDims[0] = w;\n      canvasDims[1] = h;\n      console.debug('canvas reset =' + w + 'x' + h);\n      this.elCanvas.width = w;\n      this.elCanvas.height = h;\n\n      // Compensate CSS 50% centering of canvas inside host\n      this.elCanvas.style.marginLeft = -w / 2 + 'px';\n      this.elCanvas.style.marginTop = -h / 2 + 'px';\n\n      // Center crop area by default\n      this.cropArea.setX(this.ctx.canvas.width / 2);\n      this.cropArea.setY(this.ctx.canvas.height / 2);\n\n      this.cropArea.setSize(Math.min(200, this.ctx.canvas.width / 2, this.ctx.canvas.height / 2));\n    } else {\n      this.elCanvas.width = 0;\n      this.elCanvas.height = 0;\n      this.elCanvas.style.marginLeft = 0;\n      this.elCanvas.style.marginTop = 0;\n    }\n\n    this.drawScene();\n\n    return canvasDims;\n  }\n\n  /**\n   * Returns event.changedTouches directly if event is a TouchEvent.\n   * If event is a jQuery event, return changedTouches of event.originalEvent\n   */\n  static getChangedTouches(event) {\n    return event.changedTouches ? event.changedTouches : event.originalEvent.changedTouches;\n  }\n\n  onMouseMove(e) {\n    if (this.image !== null) {\n      var offset = CropHost.getElementOffset(this.ctx.canvas),\n        pageX, pageY;\n      if (e.type === 'touchmove') {\n        pageX = CropHost.getChangedTouches(e)[0].pageX;\n        pageY = CropHost.getChangedTouches(e)[0].pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n      this.cropArea.processMouseMove(pageX - offset.left, pageY - offset.top);\n      this.drawScene();\n    }\n  }\n\n  onMouseDown(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.image !== null) {\n      var offset = CropHost.getElementOffset(this.ctx.canvas),\n        pageX, pageY;\n      if (e.type === 'touchstart') {\n        pageX = CropHost.getChangedTouches(e)[0].pageX;\n        pageY = CropHost.getChangedTouches(e)[0].pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n      this.cropArea.processMouseDown(pageX - offset.left, pageY - offset.top);\n      this.drawScene();\n    }\n  }\n\n  onMouseUp(e) {\n    if (this.image !== null) {\n      var offset = CropHost.getElementOffset(this.ctx.canvas),\n        pageX, pageY;\n      if (e.type === 'touchend') {\n        pageX = CropHost.getChangedTouches(e)[0].pageX;\n        pageY = CropHost.getChangedTouches(e)[0].pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n      this.cropArea.processMouseUp(pageX - offset.left, pageY - offset.top);\n      this.drawScene();\n    }\n  }\n\n  getResultImageDataURI() {\n    var temp_canvas = <HTMLCanvasElement>document.createElement('CANVAS');\n    var temp_ctx = temp_canvas.getContext('2d');\n    temp_canvas.width = this.resultImageSize;\n    temp_canvas.height = this.resultImageSize;\n    if (this.image !== null) {\n      temp_ctx.drawImage(this.image,\n        (this.cropArea.getX() - this.cropArea.getSize() / 2) * (this.image.width / this.ctx.canvas.width),\n        (this.cropArea.getY() - this.cropArea.getSize() / 2) * (this.image.height / this.ctx.canvas.height),\n        this.cropArea.getSize() * (this.image.width / this.ctx.canvas.width),\n        this.cropArea.getSize() * (this.image.height / this.ctx.canvas.height),\n        0, 0, this.resultImageSize, this.resultImageSize);\n    }\n    if (this.resultImageQuality !== null) {\n      return temp_canvas.toDataURL(this.resultImageFormat, this.resultImageQuality);\n    }\n    return temp_canvas.toDataURL(this.resultImageFormat);\n  }\n\n  redraw() {\n    this.drawScene();\n  }\n\n  setNewImageSource(imageSource) {\n    this.image = null;\n    this.resetCropHost();\n    this.events.trigger('image-updated');\n    if (!!imageSource) {\n      var newImage = new Image();\n      if (imageSource.substring(0, 4).toLowerCase() === 'http') {\n        newImage.crossOrigin = 'anonymous';\n      }\n      const self = this;\n      newImage.onload = function () {\n        self.events.trigger('load-done');\n\n        CropEXIF.getData(newImage, () => {\n          var orientation = CropEXIF.getTag(newImage, 'Orientation');\n          let cw = newImage.width, ch = newImage.height, cx = 0, cy = 0, deg = 0;\n\n          function imageDone() {\n            console.debug('dims=' + cw + 'x' + ch);\n            var canvasDims = self.resetCropHost(cw, ch);\n            self.setMaxDimensions(canvasDims[0], canvasDims[1]);\n            self.events.trigger('image-updated');\n            self.events.trigger('image-ready');\n          }\n\n          if ([3, 6, 8].indexOf(orientation) >= 0) {\n            const canvas = document.createElement(\"canvas\");\n            const ctx = canvas.getContext(\"2d\");\n            switch (orientation) {\n              case 3:\n                cx = -newImage.width;\n                cy = -newImage.height;\n                deg = 180;\n                break;\n              case 6:\n                cw = newImage.height;\n                ch = newImage.width;\n                cy = -newImage.height;\n                deg = 90;\n                break;\n              case 8:\n                cw = newImage.height;\n                ch = newImage.width;\n                cx = -newImage.width;\n                deg = 270;\n                break;\n            }\n            canvas.width = cw;\n            canvas.height = ch;\n            self.ctx.rotate(deg * Math.PI / 180);\n            self.ctx.drawImage(newImage, cx, cy);\n\n            self.image = new Image();\n            self.image.onload = function () {\n              imageDone();\n            };\n            self.image.src = canvas.toDataURL(\"image/png\");\n          } else {\n            self.image = newImage;\n            imageDone();\n          }\n        });\n      };\n      newImage.onerror = error => {\n        this.events.trigger('load-error', [error]);\n      };\n      this.events.trigger('load-start');\n      newImage.src = imageSource;\n    }\n  }\n\n  setMaxDimensions(width, height) {\n    console.debug('setMaxDimensions(' + width + ', ' + height + ')');\n    if (this.image !== null) {\n      const curWidth = this.ctx.canvas.width,\n        curHeight = this.ctx.canvas.height;\n\n      const ratioNewCurWidth = this.ctx.canvas.width / curWidth,\n        ratioNewCurHeight = this.ctx.canvas.height / curHeight,\n        ratioMin = Math.min(ratioNewCurWidth, ratioNewCurHeight);\n    }\n    this.maxCanvasDims = [width, height];\n    return this.resetCropHost(width, height);\n  }\n\n  setAreaMinSize(size) {\n    size = parseInt(size, 10);\n    if (!isNaN(size)) {\n      this.cropArea.setMinSize(size);\n      this.drawScene();\n    }\n  }\n\n  setResultImageSize(size) {\n    size = parseInt(size, 10);\n    if (!isNaN(size)) {\n      this.resultImageSize = size;\n    }\n  }\n\n  setResultImageFormat(format) {\n    this.resultImageFormat = format;\n  }\n\n  setResultImageQuality(quality) {\n    quality = parseFloat(quality);\n    if (!isNaN(quality) && quality >= 0 && quality <= 1) {\n      this.resultImageQuality = quality;\n    }\n  }\n\n  setAreaType(type: CropAreaType) {\n    const curSize = this.cropArea.getSize(),\n      curMinSize = this.cropArea.getMinSize(),\n      curX = this.cropArea.getX(),\n      curY = this.cropArea.getY();\n\n    if (type === CropAreaType.Square) {\n      this.cropArea = new CropAreaSquare(this.ctx, this.events);\n    } else {\n      this.cropArea = new CropAreaCircle(this.ctx, this.events);\n    }\n    this.cropArea.setMinSize(curMinSize);\n    this.cropArea.setSize(curSize);\n    this.cropArea.setX(curX);\n    this.cropArea.setY(curY);\n\n    // this.resetCropHost();\n    if (this.image !== null) {\n      this.cropArea.setImage(this.image);\n    }\n    this.drawScene();\n  }\n\n  getAreaDetails() : CropAreaDetails {\n    return {\n      x: this.cropArea.getX(),\n      y: this.cropArea.getY(),\n      size: this.cropArea.getSize(),\n      image: {width: this.cropArea.getImage().width, height: this.cropArea.getImage().height},\n      canvas: {width: this.ctx.canvas.width, height: this.ctx.canvas.height}\n    };\n  }\n\n  static getElementOffset(elem) {\n    var box = elem.getBoundingClientRect();\n\n    var body = document.body;\n    var docElem = document.documentElement;\n\n    var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n    var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\n    var clientTop = docElem.clientTop || body.clientTop || 0;\n    var clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\n    var top = box.top + scrollTop - clientTop;\n    var left = box.left + scrollLeft - clientLeft;\n\n    return {top: Math.round(top), left: Math.round(left)};\n  }\n}","export class CropPubSub {\n  private events = {};\n\n  on(names: string, handler: Function) {\n    names.split(' ').forEach(name => {\n      if (!this.events[name]) {\n        this.events[name] = [];\n      }\n      this.events[name].push(handler);\n    });\n    return this;\n  };\n\n  // Publish\n  trigger(name: string, args: any[]) {\n    const listeners = this.events[name];\n    if (listeners) {\n      listeners.forEach(handler => {\n        handler.call(null, args);\n      });\n    }\n    return this;\n  };\n}","module.exports = \":host {\\n  width: 100%;\\n  height: 100%;\\n  display: block;\\n  position: relative;\\n  overflow: hidden; }\\n  :host canvas {\\n    display: block;\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\\n    /* mobile webkit */ }\\n\"","import {\n  AfterViewInit, ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges, ViewEncapsulation\n} from '@angular/core';\nimport {CropPubSub} from \"./classes/crop-pubsub\";\nimport {CropHost} from \"./classes/crop-host\";\nimport {CropAreaType} from \"./classes/crop-area\";\n\nexport interface CropAreaDetails {\n  x: number;\n  y: number;\n  size: number;\n  image: { width: number, height: number };\n  canvas: { width: number, height: number };\n}\n\n@Component({\n  selector: 'fc-img-crop',\n  template: '<canvas></canvas>',\n  styleUrls: ['fc-img-crop.component.scss']\n})\nexport class FcImgCropComponent implements OnChanges, OnInit, AfterViewInit, OnDestroy {\n\n  @Input() image;\n\n  @Input() resultImage;\n  @Output() resultImageChange = new EventEmitter();\n\n  @Input() changeOnFly;\n  @Input() areaType: CropAreaType;\n  @Input() areaMinSize;\n\n  @Input() areaDetails: CropAreaDetails;\n  @Output() areaDetailsChange = new EventEmitter<CropAreaDetails>();\n\n  @Input() resultImageSize;\n  @Input() resultImageFormat: string;\n  @Input() resultImageQuality;\n\n  @Output() onChange = new EventEmitter();\n  @Output() onLoadBegin = new EventEmitter();\n  @Output() onLoadDone = new EventEmitter();\n  @Output() onLoadError = new EventEmitter();\n  @Output() onImageReady = new EventEmitter();\n\n  private events = new CropPubSub();\n  private cropHost: CropHost;\n  private observer: MutationObserver;\n\n  constructor(private el: ElementRef, private ref: ChangeDetectorRef) {\n  }\n\n  ngOnInit() {\n    const events = this.events;\n\n    // Init Crop Host\n    let el = this.el.nativeElement.querySelector('canvas');\n    this.cropHost = new CropHost(el, {}, events);\n\n    // Setup CropHost Event Handlers\n    const self = this;\n    events\n      .on('load-start', () => {\n        self.onLoadBegin.emit({});\n        self.ref.detectChanges();\n      })\n      .on('load-done', () => {\n        self.onLoadDone.emit({});\n        self.ref.detectChanges();\n      })\n      .on('image-ready', () => {\n        if (self.onImageReady.emit({})) {\n          self.cropHost.redraw();\n          self.ref.detectChanges();\n        }\n      })\n      .on('load-error', () => {\n        self.onLoadError.emit({});\n        self.ref.detectChanges();\n      })\n      .on('area-move area-resize', () => {\n        if (!!self.changeOnFly) {\n          self.updateResultImage();\n          self.ref.detectChanges();\n        }\n      })\n      .on('area-move-end area-resize-end image-updated', () => {\n        self.updateResultImage();\n        self.areaDetails = self.cropHost.getAreaDetails();\n        self.areaDetailsChange.emit(self.areaDetails);\n      });\n  }\n\n  // Store Result Image to check if it's changed\n  storedResultImage;\n\n  updateResultImage() {\n    const resultImage = this.cropHost.getResultImageDataURI();\n    if (this.storedResultImage !== resultImage) {\n      this.storedResultImage = resultImage;\n      this.resultImage = resultImage;\n      if (this.resultImageChange.observers.length) {\n        this.resultImageChange.emit(this.resultImage);\n      }\n      if (this.onChange.observers.length > 0) {\n        this.onChange.emit({$dataURI: this.resultImage});\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.cropHost.destroy();\n  }\n\n  /**\n   * Sync CropHost with Directive's options\n   */\n  ngOnChanges(changes: SimpleChanges): void {\n    if (this.cropHost) {\n      if (changes.image) {\n        this.cropHost.setNewImageSource(this.image);\n      }\n      if (changes.areaType) {\n        this.cropHost.setAreaType(this.areaType);\n        this.updateResultImage();\n      }\n      if (changes.areaMinSize) {\n        this.cropHost.setAreaMinSize(this.areaMinSize);\n        this.updateResultImage();\n      }\n      if (changes.resultImageSize) {\n        this.cropHost.setResultImageSize(this.resultImageSize);\n        this.updateResultImage();\n      }\n      if (changes.resultImageFormat) {\n        this.cropHost.setResultImageFormat(this.resultImageFormat);\n        this.updateResultImage();\n      }\n      if (changes.resultImageQuality) {\n        this.cropHost.setResultImageQuality(this.resultImageQuality);\n        this.updateResultImage();\n      }\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.observer = new MutationObserver(mutations => {\n      mutations.forEach((mutation: MutationRecord) => {\n        if (mutation.attributeName === 'clientWidth' || mutation.attributeName === 'clientHeight') {\n          this.cropHost.setMaxDimensions(this.el.nativeElement.clientWidth, this.el.nativeElement.clientHeight);\n          this.updateResultImage();\n        }\n      });\n    });\n    const config = {attributes: true, childList: true, characterData: true};\n    this.observer.observe(this.el.nativeElement, config);\n  }\n}","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n\n"],"sourceRoot":""}