{"version":3,"file":"ng-img-crop.umd.js.map","sources":["ng://ng-img-crop/src/app/fc-img-crop/classes/crop-pubsub.ts","ng://ng-img-crop/src/app/fc-img-crop/classes/crop-exif.ts","node_modules/tslib/tslib.es6.js","ng://ng-img-crop/src/app/fc-img-crop/classes/crop-canvas.ts","ng://ng-img-crop/src/app/fc-img-crop/classes/crop-area.ts","ng://ng-img-crop/src/app/fc-img-crop/classes/crop-area-circle.ts","ng://ng-img-crop/src/app/fc-img-crop/classes/crop-area-square.ts","ng://ng-img-crop/src/app/fc-img-crop/classes/crop-host.ts","ng://ng-img-crop/src/app/fc-img-crop/fc-img-crop.component.ts","ng://ng-img-crop/src/app/fc-img-crop/fc-img-crop.module.ts"],"sourcesContent":["export class CropPubSub {\n  private events = {};\n\n  on(names: string, handler: Function) {\n    names.split(' ').forEach(name => {\n      if (!this.events[name]) {\n        this.events[name] = [];\n      }\n      this.events[name].push(handler);\n    });\n    return this;\n  };\n\n  // Publish\n  trigger(name: string, args: any[]) {\n    const listeners = this.events[name];\n    if (listeners) {\n      listeners.forEach(handler => {\n        handler.call(null, args);\n      });\n    }\n    return this;\n  };\n}","/**\n * EXIF service is based on the exif-js library (https://github.com/jseidelin/exif-js)\n */\nexport class CropEXIF {\n\n  static ExifTags = {\n\n    // version tags\n    '0x9000': \"ExifVersion\",             // EXIF version\n    '0xA000': \"FlashpixVersion\",         // Flashpix format version\n\n    // colorspace tags\n    '0xA001': \"ColorSpace\",              // Color space information tag\n\n    // image configuration\n    '0xA002': \"PixelXDimension\",         // Valid width of meaningful image\n    '0xA003': \"PixelYDimension\",         // Valid height of meaningful image\n    '0x9101': \"ComponentsConfiguration\", // Information about channels\n    '0x9102': \"CompressedBitsPerPixel\",  // Compressed bits per pixel\n\n    // user information\n    '0x927C': \"MakerNote\",               // Any desired information written by the manufacturer\n    '0x9286': \"UserComment\",             // Comments by user\n\n    // related file\n    '0xA004': \"RelatedSoundFile\",        // Name of related sound file\n\n    // date and time\n    '0x9003': \"DateTimeOriginal\",        // Date and time when the original image was generated\n    '0x9004': \"DateTimeDigitized\",       // Date and time when the image was stored digitally\n    '0x9290': \"SubsecTime\",              // Fractions of seconds for DateTime\n    '0x9291': \"SubsecTimeOriginal\",      // Fractions of seconds for DateTimeOriginal\n    '0x9292': \"SubsecTimeDigitized\",     // Fractions of seconds for DateTimeDigitized\n\n    // picture-taking conditions\n    '0x829A': \"ExposureTime\",            // Exposure time (in seconds)\n    '0x829D': \"FNumber\",                 // F number\n    '0x8822': \"ExposureProgram\",         // Exposure program\n    '0x8824': \"SpectralSensitivity\",     // Spectral sensitivity\n    '0x8827': \"ISOSpeedRatings\",         // ISO speed rating\n    '0x8828': \"OECF\",                    // Optoelectric conversion factor\n    '0x9201': \"ShutterSpeedValue\",       // Shutter speed\n    '0x9202': \"ApertureValue\",           // Lens aperture\n    '0x9203': \"BrightnessValue\",         // Value of brightness\n    '0x9204': \"ExposureBias\",            // Exposure bias\n    '0x9205': \"MaxApertureValue\",        // Smallest F number of lens\n    '0x9206': \"SubjectDistance\",         // Distance to subject in meters\n    '0x9207': \"MeteringMode\",            // Metering mode\n    '0x9208': \"LightSource\",             // Kind of light source\n    '0x9209': \"Flash\",                   // Flash status\n    '0x9214': \"SubjectArea\",             // Location and area of main subject\n    '0x920A': \"FocalLength\",             // Focal length of the lens in mm\n    '0xA20B': \"FlashEnergy\",             // Strobe energy in BCPS\n    '0xA20C': \"SpatialFrequencyResponse\",    //\n    '0xA20E': \"FocalPlaneXResolution\",   // Number of pixels in width direction per FocalPlaneResolutionUnit\n    '0xA20F': \"FocalPlaneYResolution\",   // Number of pixels in height direction per FocalPlaneResolutionUnit\n    '0xA210': \"FocalPlaneResolutionUnit\",    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\n    '0xA214': \"SubjectLocation\",         // Location of subject in image\n    '0xA215': \"ExposureIndex\",           // Exposure index selected on camera\n    '0xA217': \"SensingMethod\",           // Image sensor type\n    '0xA300': \"FileSource\",              // Image source (3 == DSC)\n    '0xA301': \"SceneType\",               // Scene type (1 == directly photographed)\n    '0xA302': \"CFAPattern\",              // Color filter array geometric pattern\n    '0xA401': \"CustomRendered\",          // Special processing\n    '0xA402': \"ExposureMode\",            // Exposure mode\n    '0xA403': \"WhiteBalance\",            // 1 = auto white balance, 2 = manual\n    '0xA404': \"DigitalZoomRation\",       // Digital zoom ratio\n    '0xA405': \"FocalLengthIn35mmFilm\",   // Equivalent foacl length assuming 35mm film camera (in mm)\n    '0xA406': \"SceneCaptureType\",        // Type of scene\n    '0xA407': \"GainControl\",             // Degree of overall image gain adjustment\n    '0xA408': \"Contrast\",                // Direction of contrast processing applied by camera\n    '0xA409': \"Saturation\",              // Direction of saturation processing applied by camera\n    '0xA40A': \"Sharpness\",               // Direction of sharpness processing applied by camera\n    '0xA40B': \"DeviceSettingDescription\",    //\n    '0xA40C': \"SubjectDistanceRange\",    // Distance to subject\n\n    // other tags\n    '0xA005': \"InteroperabilityIFDPointer\",\n    '0xA420': \"ImageUniqueID\"            // Identifier assigned uniquely to each image\n  };\n\n  static TiffTags = {\n    '0x0100': \"ImageWidth\",\n    '0x0101': \"ImageHeight\",\n    '0x8769': \"ExifIFDPointer\",\n    '0x8825': \"GPSInfoIFDPointer\",\n    '0xA005': \"InteroperabilityIFDPointer\",\n    '0x0102': \"BitsPerSample\",\n    '0x0103': \"Compression\",\n    '0x0106': \"PhotometricInterpretation\",\n    '0x0112': \"Orientation\",\n    '0x0115': \"SamplesPerPixel\",\n    '0x011C': \"PlanarConfiguration\",\n    '0x0212': \"YCbCrSubSampling\",\n    '0x0213': \"YCbCrPositioning\",\n    '0x011A': \"XResolution\",\n    '0x011B': \"YResolution\",\n    '0x0128': \"ResolutionUnit\",\n    '0x0111': \"StripOffsets\",\n    '0x0116': \"RowsPerStrip\",\n    '0x0117': \"StripByteCounts\",\n    '0x0201': \"JPEGInterchangeFormat\",\n    '0x0202': \"JPEGInterchangeFormatLength\",\n    '0x012D': \"TransferFunction\",\n    '0x013E': \"WhitePoint\",\n    '0x013F': \"PrimaryChromaticities\",\n    '0x0211': \"YCbCrCoefficients\",\n    '0x0214': \"ReferenceBlackWhite\",\n    '0x0132': \"DateTime\",\n    '0x010E': \"ImageDescription\",\n    '0x010F': \"Make\",\n    '0x0110': \"Model\",\n    '0x0131': \"Software\",\n    '0x013B': \"Artist\",\n    '0x8298': \"Copyright\"\n  };\n\n  static GPSTags = {\n    '0x0000': \"GPSVersionID\",\n    '0x0001': \"GPSLatitudeRef\",\n    '0x0002': \"GPSLatitude\",\n    '0x0003': \"GPSLongitudeRef\",\n    '0x0004': \"GPSLongitude\",\n    '0x0005': \"GPSAltitudeRef\",\n    '0x0006': \"GPSAltitude\",\n    '0x0007': \"GPSTimeStamp\",\n    '0x0008': \"GPSSatellites\",\n    '0x0009': \"GPSStatus\",\n    '0x000A': \"GPSMeasureMode\",\n    '0x000B': \"GPSDOP\",\n    '0x000C': \"GPSSpeedRef\",\n    '0x000D': \"GPSSpeed\",\n    '0x000E': \"GPSTrackRef\",\n    '0x000F': \"GPSTrack\",\n    '0x0010': \"GPSImgDirectionRef\",\n    '0x0011': \"GPSImgDirection\",\n    '0x0012': \"GPSMapDatum\",\n    '0x0013': \"GPSDestLatitudeRef\",\n    '0x0014': \"GPSDestLatitude\",\n    '0x0015': \"GPSDestLongitudeRef\",\n    '0x0016': \"GPSDestLongitude\",\n    '0x0017': \"GPSDestBearingRef\",\n    '0x0018': \"GPSDestBearing\",\n    '0x0019': \"GPSDestDistanceRef\",\n    '0x001A': \"GPSDestDistance\",\n    '0x001B': \"GPSProcessingMethod\",\n    '0x001C': \"GPSAreaInformation\",\n    '0x001D': \"GPSDateStamp\",\n    '0x001E': \"GPSDifferential\"\n  };\n\n  static StringValues = {\n    ExposureProgram: {\n      '0': \"Not defined\",\n      '1': \"Manual\",\n      '2': \"Normal program\",\n      '3': \"Aperture priority\",\n      '4': \"Shutter priority\",\n      '5': \"Creative program\",\n      '6': \"Action program\",\n      '7': \"Portrait mode\",\n      '8': \"Landscape mode\"\n    },\n    MeteringMode: {\n      '0': \"Unknown\",\n      '1': \"Average\",\n      '2': \"CenterWeightedAverage\",\n      '3': \"Spot\",\n      '4': \"MultiSpot\",\n      '5': \"Pattern\",\n      '6': \"Partial\",\n      '255': \"Other\"\n    },\n    LightSource: {\n      '0': \"Unknown\",\n      '1': \"Daylight\",\n      '2': \"Fluorescent\",\n      '3': \"Tungsten (incandescent light)\",\n      '4': \"Flash\",\n      '9': \"Fine weather\",\n      '10': \"Cloudy weather\",\n      '11': \"Shade\",\n      '12': \"Daylight fluorescent (D 5700 - 7100K)\",\n      '13': \"Day white fluorescent (N 4600 - 5400K)\",\n      '14': \"Cool white fluorescent (W 3900 - 4500K)\",\n      '15': \"White fluorescent (WW 3200 - 3700K)\",\n      '17': \"Standard light A\",\n      '18': \"Standard light B\",\n      '19': \"Standard light C\",\n      '20': \"D55\",\n      '21': \"D65\",\n      '22': \"D75\",\n      '23': \"D50\",\n      '24': \"ISO studio tungsten\",\n      '255': \"Other\"\n    },\n    Flash: {\n      '0x0000': \"Flash did not fire\",\n      '0x0001': \"Flash fired\",\n      '0x0005': \"Strobe return light not detected\",\n      '0x0007': \"Strobe return light detected\",\n      '0x0009': \"Flash fired, compulsory flash mode\",\n      '0x000D': \"Flash fired, compulsory flash mode, return light not detected\",\n      '0x000F': \"Flash fired, compulsory flash mode, return light detected\",\n      '0x0010': \"Flash did not fire, compulsory flash mode\",\n      '0x0018': \"Flash did not fire, auto mode\",\n      '0x0019': \"Flash fired, auto mode\",\n      '0x001D': \"Flash fired, auto mode, return light not detected\",\n      '0x001F': \"Flash fired, auto mode, return light detected\",\n      '0x0020': \"No flash function\",\n      '0x0041': \"Flash fired, red-eye reduction mode\",\n      '0x0045': \"Flash fired, red-eye reduction mode, return light not detected\",\n      '0x0047': \"Flash fired, red-eye reduction mode, return light detected\",\n      '0x0049': \"Flash fired, compulsory flash mode, red-eye reduction mode\",\n      '0x004D': \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\n      '0x004F': \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\n      '0x0059': \"Flash fired, auto mode, red-eye reduction mode\",\n      '0x005D': \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\n      '0x005F': \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\n    },\n    SensingMethod: {\n      '1': \"Not defined\",\n      '2': \"One-chip color area sensor\",\n      '3': \"Two-chip color area sensor\",\n      '4': \"Three-chip color area sensor\",\n      '5': \"Color sequential area sensor\",\n      '7': \"Trilinear sensor\",\n      '8': \"Color sequential linear sensor\"\n    },\n    SceneCaptureType: {\n      '0': \"Standard\",\n      '1': \"Landscape\",\n      '2': \"Portrait\",\n      '3': \"Night scene\"\n    },\n    SceneType: {\n      '1': \"Directly photographed\"\n    },\n    CustomRendered: {\n      '0': \"Normal process\",\n      '1': \"Custom process\"\n    },\n    WhiteBalance: {\n      '0': \"Auto white balance\",\n      '1': \"Manual white balance\"\n    },\n    GainControl: {\n      '0': \"None\",\n      '1': \"Low gain up\",\n      '2': \"High gain up\",\n      '3': \"Low gain down\",\n      '4': \"High gain down\"\n    },\n    Contrast: {\n      '0': \"Normal\",\n      '1': \"Soft\",\n      '2': \"Hard\"\n    },\n    Saturation: {\n      '0': \"Normal\",\n      '1': \"Low saturation\",\n      '2': \"High saturation\"\n    },\n    Sharpness: {\n      '0': \"Normal\",\n      '1': \"Soft\",\n      '2': \"Hard\"\n    },\n    SubjectDistanceRange: {\n      '0': \"Unknown\",\n      '1': \"Macro\",\n      '2': \"Close view\",\n      '3': \"Distant view\"\n    },\n    FileSource: {\n      '3': \"DSC\"\n    },\n\n    Components: {\n      '0': \"\",\n      '1': \"Y\",\n      '2': \"Cb\",\n      '3': \"Cr\",\n      '4': \"R\",\n      '5': \"G\",\n      '6': \"B\"\n    }\n  };\n\n  static IptcFieldMap = {\n    '0x78': 'caption',\n    '0x6E': 'credit',\n    '0x19': 'keywords',\n    '0x37': 'dateCreated',\n    '0x50': 'byline',\n    '0x55': 'bylineTitle',\n    '0x7A': 'captionWriter',\n    '0x69': 'headline',\n    '0x74': 'copyright',\n    '0x0F': 'category'\n  };\n\n  static readIPTCData(file, startOffset, sectionLength) {\n    var dataView = new DataView(file);\n    var data = {};\n    var fieldValue, fieldName, dataSize, segmentType, segmentSize;\n    var segmentStartPos = startOffset;\n    while (segmentStartPos < startOffset + sectionLength) {\n      if (dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos + 1) === 0x02) {\n        segmentType = dataView.getUint8(segmentStartPos + 2);\n        if (segmentType in CropEXIF.IptcFieldMap) {\n          dataSize = dataView.getInt16(segmentStartPos + 3);\n          segmentSize = dataSize + 5;\n          fieldName = CropEXIF.IptcFieldMap[segmentType];\n          fieldValue = CropEXIF.getStringFromDB(dataView, segmentStartPos + 5, dataSize);\n          // Check if we already stored a value with this name\n          if (data.hasOwnProperty(fieldName)) {\n            // Value already stored with this name, create multivalue field\n            if (data[fieldName] instanceof Array) {\n              data[fieldName].push(fieldValue);\n            }\n            else {\n              data[fieldName] = [data[fieldName], fieldValue];\n            }\n          }\n          else {\n            data[fieldName] = fieldValue;\n          }\n        }\n\n      }\n      segmentStartPos++;\n    }\n    return data;\n  }\n\n  static readTags(file, tiffStart, dirStart, strings, bigEnd): { [key: string]: any } {\n    var entries = file.getUint16(dirStart, !bigEnd),\n      tags = {},\n      entryOffset, tag,\n      i;\n\n    for (i = 0; i < entries; i++) {\n      entryOffset = dirStart + i * 12 + 2;\n      tag = strings[file.getUint16(entryOffset, !bigEnd)];\n      if (tag) {\n        tags[tag] = CropEXIF.readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\n      } else {\n        console.warn('Unknown tag: ' + file.getUint16(entryOffset, !bigEnd));\n      }\n    }\n    return tags;\n  }\n\n  static readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {\n    var type = file.getUint16(entryOffset + 2, !bigEnd),\n      numValues = file.getUint32(entryOffset + 4, !bigEnd),\n      valueOffset = file.getUint32(entryOffset + 8, !bigEnd) + tiffStart,\n      offset,\n      vals, val, n,\n      numerator, denominator;\n\n    switch (type) {\n      case '1': // byte, 8-bit unsigned int\n      case '7': // undefined, 8-bit byte, value depending on field\n        if (numValues == 1) {\n          return file.getUint8(entryOffset + 8, !bigEnd);\n        } else {\n          offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getUint8(offset + n);\n          }\n          return vals;\n        }\n\n      case '2': // ascii, 8-bit byte\n        offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n        return this.getStringFromDB(file, offset, numValues - 1);\n\n      case '3': // short, 16 bit int\n        if (numValues == 1) {\n          return file.getUint16(entryOffset + 8, !bigEnd);\n        } else {\n          offset = numValues > 2 ? valueOffset : (entryOffset + 8);\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getUint16(offset + 2 * n, !bigEnd);\n          }\n          return vals;\n        }\n\n      case '4': // long, 32 bit int\n        if (numValues == 1) {\n          return file.getUint32(entryOffset + 8, !bigEnd);\n        } else {\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getUint32(valueOffset + 4 * n, !bigEnd);\n          }\n          return vals;\n        }\n\n      case '5':    // rational = two long values, first is numerator, second is denominator\n        if (numValues == 1) {\n          numerator = file.getUint32(valueOffset, !bigEnd);\n          denominator = file.getUint32(valueOffset + 4, !bigEnd);\n          val = new Number(numerator / denominator);\n          val.numerator = numerator;\n          val.denominator = denominator;\n          return val;\n        } else {\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            numerator = file.getUint32(valueOffset + 8 * n, !bigEnd);\n            denominator = file.getUint32(valueOffset + 4 + 8 * n, !bigEnd);\n            vals[n] = new Number(numerator / denominator);\n            vals[n].numerator = numerator;\n            vals[n].denominator = denominator;\n          }\n          return vals;\n        }\n\n      case '9': // slong, 32 bit signed int\n        if (numValues == 1) {\n          return file.getInt32(entryOffset + 8, !bigEnd);\n        } else {\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getInt32(valueOffset + 4 * n, !bigEnd);\n          }\n          return vals;\n        }\n\n      case '10': // signed rational, two slongs, first is numerator, second is denominator\n        if (numValues == 1) {\n          return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset + 4, !bigEnd);\n        } else {\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getInt32(valueOffset + 8 * n, !bigEnd) / file.getInt32(valueOffset + 4 + 8 * n, !bigEnd);\n          }\n          return vals;\n        }\n    }\n  }\n\n  static addEvent(element, event, handler) {\n    if (element.addEventListener) {\n      element.addEventListener(event, handler, false);\n    } else if (element.attachEvent) {\n      element.attachEvent(\"on\" + event, handler);\n    }\n  }\n\n  static objectURLToBlob(url, callback) {\n    var http = new XMLHttpRequest();\n    http.open(\"GET\", url, true);\n    http.responseType = \"blob\";\n    http.onload = function (e) {\n      if (this.status == 200 || this.status === 0) {\n        callback(this.response);\n      }\n    };\n    http.send();\n  }\n\n  static handleBinaryFile(binFile, img, callback?) {\n    var data = CropEXIF.findEXIFinJPEG(binFile);\n    var iptcdata = CropEXIF.findIPTCinJPEG(binFile);\n    img.exifdata = data || {};\n    img.iptcdata = iptcdata || {};\n    if (callback) {\n      callback.call(img);\n    }\n  }\n\n  static getImageData(img, callback) {\n    if (img.src) {\n      if (/^data\\:/i.test(img.src)) { // Data URI\n        var arrayBuffer = CropEXIF.base64ToArrayBuffer(img.src);\n        this.handleBinaryFile(arrayBuffer, img, callback);\n\n      } else if (/^blob\\:/i.test(img.src)) { // Object URL\n        var fileReader = new FileReader();\n        fileReader.onload = (e) => {\n          this.handleBinaryFile(e.target.result, img, callback);\n        };\n        CropEXIF.objectURLToBlob(img.src, function (blob) {\n          fileReader.readAsArrayBuffer(blob);\n        });\n      } else {\n        var http = new XMLHttpRequest();\n        const self = this;\n        http.onload = function () {\n          if (this.status == 200 || this.status === 0) {\n            self.handleBinaryFile(http.response, img, callback);\n          } else {\n            throw \"Could not load image\";\n          }\n          http = null;\n        };\n        http.open(\"GET\", img.src, true);\n        http.responseType = \"arraybuffer\";\n        http.send(null);\n      }\n    } else if (FileReader && (img instanceof window.Blob || img instanceof File)) {\n      var fileReader = new FileReader();\n      fileReader.onload = e => {\n        console.debug('getImageData: Got file of length %o', e.target.result.byteLength);\n        this.handleBinaryFile(e.target.result, img, callback);\n      };\n\n      fileReader.readAsArrayBuffer(img);\n    }\n  }\n\n  static getStringFromDB(buffer, start, length) {\n    var outstr = \"\";\n    for (var n = start; n < start + length; n++) {\n      outstr += String.fromCharCode(buffer.getUint8(n));\n    }\n    return outstr;\n  }\n\n  static readEXIFData(file, start) {\n    if (this.getStringFromDB(file, start, 4) != \"Exif\") {\n      console.error(\"Not valid EXIF data! \" + this.getStringFromDB(file, start, 4));\n      return false;\n    }\n\n    var bigEnd,\n      tags,\n      exifData, gpsData,\n      tiffOffset = start + 6;\n    let tag: string;\n\n    // test for TIFF validity and endianness\n    if (file.getUint16(tiffOffset) == 0x4949) {\n      bigEnd = false;\n    } else if (file.getUint16(tiffOffset) == 0x4D4D) {\n      bigEnd = true;\n    } else {\n      console.error(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n      return false;\n    }\n\n    if (file.getUint16(tiffOffset + 2, !bigEnd) != 0x002A) {\n      console.error(\"Not valid TIFF data! (no 0x002A)\");\n      return false;\n    }\n\n    var firstIFDOffset = file.getUint32(tiffOffset + 4, !bigEnd);\n\n    if (firstIFDOffset < 0x00000008) {\n      console.error(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset + 4, !bigEnd));\n      return false;\n    }\n\n    tags = CropEXIF.readTags(file, tiffOffset, tiffOffset + firstIFDOffset, this.TiffTags, bigEnd);\n\n    if (tags.ExifIFDPointer) {\n      exifData = CropEXIF.readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, this.ExifTags, bigEnd);\n      for (tag in exifData) {\n        switch (tag) {\n          case \"LightSource\" :\n          case \"Flash\" :\n          case \"MeteringMode\" :\n          case \"ExposureProgram\" :\n          case \"SensingMethod\" :\n          case \"SceneCaptureType\" :\n          case \"SceneType\" :\n          case \"CustomRendered\" :\n          case \"WhiteBalance\" :\n          case \"GainControl\" :\n          case \"Contrast\" :\n          case \"Saturation\" :\n          case \"Sharpness\" :\n          case \"SubjectDistanceRange\" :\n          case \"FileSource\" :\n            exifData[tag] = this.StringValues[tag][exifData[tag]];\n            break;\n\n          case \"ExifVersion\" :\n          case \"FlashpixVersion\" :\n            exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\n            break;\n\n          case \"ComponentsConfiguration\" :\n            exifData[tag] =\n              this.StringValues.Components[exifData[tag][0]] +\n              this.StringValues.Components[exifData[tag][1]] +\n              this.StringValues.Components[exifData[tag][2]] +\n              this.StringValues.Components[exifData[tag][3]];\n            break;\n        }\n        tags[tag] = exifData[tag];\n      }\n    }\n\n    if (tags.GPSInfoIFDPointer) {\n      gpsData = this.readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, this.GPSTags, bigEnd);\n      for (tag in gpsData) {\n        switch (tag) {\n          case \"GPSVersionID\" :\n            gpsData[tag] = gpsData[tag][0] +\n              \".\" + gpsData[tag][1] +\n              \".\" + gpsData[tag][2] +\n              \".\" + gpsData[tag][3];\n            break;\n        }\n        tags[tag] = gpsData[tag];\n      }\n    }\n\n    return tags;\n  }\n\n  static getData(img, callback) {\n    if ((img instanceof Image || img instanceof HTMLImageElement) && !img.complete) return false;\n\n    if (!this.imageHasData(img)) {\n      CropEXIF.getImageData(img, callback);\n    } else {\n      if (callback) {\n        callback.call(img);\n      }\n    }\n    return true;\n  };\n\n  static getTag(img, tag) {\n    if (!this.imageHasData(img)) return;\n    return img.exifdata[tag];\n  };\n\n  static getAllTags(img) {\n    if (!this.imageHasData(img)) return {};\n    var a,\n      data = img.exifdata,\n      tags = {};\n    for (a in data) {\n      if (data.hasOwnProperty(a)) {\n        tags[a] = data[a];\n      }\n    }\n    return tags;\n  };\n\n  static pretty(img) {\n    if (!this.imageHasData(img)) return \"\";\n    var a,\n      data = img.exifdata,\n      strPretty = \"\";\n    for (a in data) {\n      if (data.hasOwnProperty(a)) {\n        if (typeof data[a] == \"object\") {\n          if (data[a] instanceof Number) {\n            strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\n          } else {\n            strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\n          }\n        } else {\n          strPretty += a + \" : \" + data[a] + \"\\r\\n\";\n        }\n      }\n    }\n    return strPretty;\n  }\n\n\n  static findEXIFinJPEG(file) {\n    var dataView = new DataView(file);\n    var maxOffset = dataView.byteLength - 4;\n\n    console.debug('findEXIFinJPEG: Got file of length %o', file.byteLength);\n    if (dataView.getUint16(0) !== 0xffd8) {\n      console.warn('Not a valid JPEG');\n      return false; // not a valid jpeg\n    }\n\n    var offset = 2;\n    var marker;\n\n    function readByte() {\n      var someByte = dataView.getUint8(offset);\n      offset++;\n      return someByte;\n    }\n\n    function readWord() {\n      var someWord = dataView.getUint16(offset);\n      offset = offset + 2;\n      return someWord;\n    }\n\n    while (offset < maxOffset) {\n      var someByte = readByte();\n      if (someByte != 0xFF) {\n        console.error('Not a valid marker at offset ' + offset + \", found: \" + someByte);\n        return false; // not a valid marker, something is wrong\n      }\n      marker = readByte();\n      console.debug('Marker=%o', marker);\n\n      // we could implement handling for other markers here,\n      // but we're only looking for 0xFFE1 for EXIF data\n\n      var segmentLength = readWord() - 2;\n      switch (marker) {\n        case '0xE1':\n          return this.readEXIFData(dataView, offset/*, segmentLength*/);\n        case '0xE0': // JFIF\n        default:\n          offset += segmentLength;\n      }\n    }\n  }\n\n  static findIPTCinJPEG(file) {\n    var dataView = new DataView(file);\n\n    console.debug('Got file of length ' + file.byteLength);\n    if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n      console.warn('Not a valid JPEG');\n      return false; // not a valid jpeg\n    }\n\n    var offset = 2,\n      length = file.byteLength;\n\n\n    var isFieldSegmentStart = function (dataView, offset) {\n      return (\n        dataView.getUint8(offset) === 0x38 &&\n        dataView.getUint8(offset + 1) === 0x42 &&\n        dataView.getUint8(offset + 2) === 0x49 &&\n        dataView.getUint8(offset + 3) === 0x4D &&\n        dataView.getUint8(offset + 4) === 0x04 &&\n        dataView.getUint8(offset + 5) === 0x04\n      );\n    };\n\n    while (offset < length) {\n      if (isFieldSegmentStart(dataView, offset)) {\n        // Get the length of the name header (which is padded to an even number of bytes)\n        var nameHeaderLength = dataView.getUint8(offset + 7);\n        if (nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\n        // Check for pre photoshop 6 format\n        if (nameHeaderLength === 0) {\n          // Always 4\n          nameHeaderLength = 4;\n        }\n\n        var startOffset = offset + 8 + nameHeaderLength;\n        var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\n\n        return this.readIPTCData(file, startOffset, sectionLength);\n      }\n\n      // Not the marker, continue searching\n      offset++;\n    }\n  }\n\n  static readFromBinaryFile(file) {\n    return CropEXIF.findEXIFinJPEG(file);\n  }\n\n  static imageHasData(img) {\n    return !!(img.exifdata);\n  }\n\n  static base64ToArrayBuffer(base64, contentType?) {\n    contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\n    base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n    var binary = atob(base64);\n    var len = binary.length;\n    var buffer = new ArrayBuffer(len);\n    var view = new Uint8Array(buffer);\n    for (var i = 0; i < len; i++) {\n      view[i] = binary.charCodeAt(i);\n    }\n    return buffer;\n  }\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class CropCanvas {\n    // Shape = Array of [x,y]; [0, 0] - center\n    shapeArrowNW = [[-0.5, -2], [-3, -4.5], [-0.5, -7], [-7, -7], [-7, -0.5], [-4.5, -3], [-2, -0.5]];\n    shapeArrowNE = [[0.5, -2], [3, -4.5], [0.5, -7], [7, -7], [7, -0.5], [4.5, -3], [2, -0.5]];\n    shapeArrowSW = [[-0.5, 2], [-3, 4.5], [-0.5, 7], [-7, 7], [-7, 0.5], [-4.5, 3], [-2, 0.5]];\n    shapeArrowSE = [[0.5, 2], [3, 4.5], [0.5, 7], [7, 7], [7, 0.5], [4.5, 3], [2, 0.5]];\n    shapeArrowN = [[-1.5, -2.5], [-1.5, -6], [-5, -6], [0, -11], [5, -6], [1.5, -6], [1.5, -2.5]];\n    shapeArrowW = [[-2.5, -1.5], [-6, -1.5], [-6, -5], [-11, 0], [-6, 5], [-6, 1.5], [-2.5, 1.5]];\n    shapeArrowS = [[-1.5, 2.5], [-1.5, 6], [-5, 6], [0, 11], [5, 6], [1.5, 6], [1.5, 2.5]];\n    shapeArrowE = [[2.5, -1.5], [6, -1.5], [6, -5], [11, 0], [6, 5], [6, 1.5], [2.5, 1.5]];\n\n    // Colors\n    colors = {\n        areaOutline: '#fff',\n        resizeBoxStroke: '#fff',\n        resizeBoxFill: '#444',\n        resizeBoxArrowFill: '#fff',\n        resizeCircleStroke: '#fff',\n        resizeCircleFill: '#444',\n        moveIconFill: '#fff'\n    };\n\n    constructor(private ctx) {}\n\n    // Calculate Point\n    calcPoint(point, offset, scale) {\n        return [scale * point[0] + offset[0], scale * point[1] + offset[1]];\n    };\n\n    // Draw Filled Polygon\n    private drawFilledPolygon(shape, fillStyle, centerCoords, scale) {\n        this.ctx.save();\n        this.ctx.fillStyle = fillStyle;\n        this.ctx.beginPath();\n        var pc, pc0 = this.calcPoint(shape[0], centerCoords, scale);\n        this.ctx.moveTo(pc0[0], pc0[1]);\n\n        for (var p in shape) {\n            let pNum = parseInt(p, 10);\n            if (pNum > 0) {\n                pc = this.calcPoint(shape[pNum], centerCoords, scale);\n                this.ctx.lineTo(pc[0], pc[1]);\n            }\n        }\n\n        this.ctx.lineTo(pc0[0], pc0[1]);\n        this.ctx.fill();\n        this.ctx.closePath();\n        this.ctx.restore();\n    };\n\n    /* Icons */\n\n    drawIconMove(centerCoords, scale) {\n        this.drawFilledPolygon(this.shapeArrowN, this.colors.moveIconFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowW, this.colors.moveIconFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowS, this.colors.moveIconFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowE, this.colors.moveIconFill, centerCoords, scale);\n    }\n\n    drawIconResizeCircle(centerCoords, circleRadius, scale) {\n        var scaledCircleRadius = circleRadius * scale;\n        this.ctx.save();\n        this.ctx.strokeStyle = this.colors.resizeCircleStroke;\n        this.ctx.lineWidth = 2;\n        this.ctx.fillStyle = this.colors.resizeCircleFill;\n        this.ctx.beginPath();\n        this.ctx.arc(centerCoords[0], centerCoords[1], scaledCircleRadius, 0, 2 * Math.PI);\n        this.ctx.fill();\n        this.ctx.stroke();\n        this.ctx.closePath();\n        this.ctx.restore();\n    }\n\n    drawIconResizeBoxBase (centerCoords, boxSize, scale) {\n        var scaledBoxSize = boxSize * scale;\n        this.ctx.save();\n        this.ctx.strokeStyle = this.colors.resizeBoxStroke;\n        this.ctx.lineWidth = 2;\n        this.ctx.fillStyle = this.colors.resizeBoxFill;\n        this.ctx.fillRect(centerCoords[0] - scaledBoxSize / 2, centerCoords[1] - scaledBoxSize / 2, scaledBoxSize, scaledBoxSize);\n        this.ctx.strokeRect(centerCoords[0] - scaledBoxSize / 2, centerCoords[1] - scaledBoxSize / 2, scaledBoxSize, scaledBoxSize);\n        this.ctx.restore();\n    }\n    drawIconResizeBoxNESW(centerCoords, boxSize, scale) {\n        this.drawIconResizeBoxBase(centerCoords, boxSize, scale);\n        this.drawFilledPolygon(this.shapeArrowNE, this.colors.resizeBoxArrowFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowSW, this.colors.resizeBoxArrowFill, centerCoords, scale);\n    }\n    drawIconResizeBoxNWSE(centerCoords, boxSize, scale) {\n        this.drawIconResizeBoxBase(centerCoords, boxSize, scale);\n        this.drawFilledPolygon(this.shapeArrowNW, this.colors.resizeBoxArrowFill, centerCoords, scale);\n        this.drawFilledPolygon(this.shapeArrowSE, this.colors.resizeBoxArrowFill, centerCoords, scale);\n    }\n\n    /* Crop Area */\n\n    drawCropArea(image, centerCoords, size, fnDrawClipPath) {\n        var xRatio = image.width / this.ctx.canvas.width,\n            yRatio = image.height / this.ctx.canvas.height,\n            xLeft = centerCoords[0] - size / 2,\n            yTop = centerCoords[1] - size / 2;\n\n        this.ctx.save();\n        this.ctx.strokeStyle = this.colors.areaOutline;\n        this.ctx.lineWidth = 2;\n        this.ctx.beginPath();\n        fnDrawClipPath(this.ctx, centerCoords, size);\n        this.ctx.stroke();\n        this.ctx.clip();\n\n        // draw part of original image\n        if (size > 0) {\n            this.ctx.drawImage(image, xLeft * xRatio, yTop * yRatio, size * xRatio, size * yRatio, xLeft, yTop, size, size);\n        }\n\n        this.ctx.beginPath();\n        fnDrawClipPath(this.ctx, centerCoords, size);\n        this.ctx.stroke();\n        this.ctx.clip();\n\n        this.ctx.restore();\n    };\n}","import {CropCanvas} from \"./crop-canvas\";\n\nexport enum CropAreaType {\n  Square = 'square',\n  Circle = 'circle'\n}\n\nexport abstract class CropArea {\n  protected _minSize = 80;\n  protected _cropCanvas: CropCanvas;\n  protected _image = new Image();\n  protected _x = 0;\n  protected _y = 0;\n  protected _size = 200;\n\n  constructor(protected _ctx, protected _events) {\n    this._cropCanvas = new CropCanvas(_ctx);\n  }\n\n  getImage() {\n    return this._image;\n  }\n\n  setImage(image) {\n    this._image = image;\n  };\n\n  getX() {\n    return this._x;\n  };\n\n  setX(x) {\n    this._x = x;\n    this._dontDragOutside();\n  };\n\n  getY() {\n    return this._y;\n  };\n\n  setY(y) {\n    this._y = y;\n    this._dontDragOutside();\n  };\n\n  getSize() : number {\n    return this._size;\n  };\n\n  setSize(size) {\n    this._size = Math.max(this._minSize, size);\n    this._dontDragOutside();\n  };\n\n  getMinSize() {\n    return this._minSize;\n  };\n\n  setMinSize(size) {\n    this._minSize = size;\n    this._size = Math.max(this._minSize, this._size);\n    this._dontDragOutside();\n  };\n\n  _dontDragOutside() {\n    var h = this._ctx.canvas.height,\n      w = this._ctx.canvas.width;\n    if (this._size > w) {\n      this._size = w;\n    }\n    if (this._size > h) {\n      this._size = h;\n    }\n    if (this._x < this._size / 2) {\n      this._x = this._size / 2;\n    }\n    if (this._x > w - this._size / 2) {\n      this._x = w - this._size / 2;\n    }\n    if (this._y < this._size / 2) {\n      this._y = this._size / 2;\n    }\n    if (this._y > h - this._size / 2) {\n      this._y = h - this._size / 2;\n    }\n  };\n\n  abstract _drawArea(ctx, centerCoords, size);\n\n  draw() {\n    this._cropCanvas.drawCropArea(this._image, [this._x, this._y], this._size, this._drawArea);\n  };\n\n  abstract processMouseMove(mouseCurX: number, mouseCurY: number);\n\n  abstract processMouseDown(mouseDownX: number, mouseDownY: number);\n\n  abstract processMouseUp(mouseDownX: number, mouseDownY: number);\n}","import {CropArea} from \"./crop-area\";\n\nexport class CropAreaCircle extends CropArea {\n  _boxResizeBaseSize = 20;\n  _boxResizeNormalRatio = 0.9;\n  _boxResizeHoverRatio = 1.2;\n  _iconMoveNormalRatio = 0.9;\n  _iconMoveHoverRatio = 1.2;\n\n  _posDragStartX = 0;\n  _posDragStartY = 0;\n  _posResizeStartX = 0;\n  _posResizeStartY = 0;\n  _posResizeStartSize = 0;\n\n  _boxResizeIsHover = false;\n  _areaIsHover = false;\n  _boxResizeIsDragging = false;\n  _areaIsDragging = false;\n\n  private _boxResizeNormalSize: number;\n  private _boxResizeHoverSize: number;\n\n  constructor(ctx, events) {\n    super(ctx, events);\n\n    this._boxResizeNormalSize = this._boxResizeBaseSize * this._boxResizeNormalRatio;\n    this._boxResizeHoverSize = this._boxResizeBaseSize * this._boxResizeHoverRatio;\n  }\n\n  _calcCirclePerimeterCoords(angleDegrees) {\n    var hSize = this._size / 2;\n    var angleRadians = angleDegrees * (Math.PI / 180),\n      circlePerimeterX = this._x + hSize * Math.cos(angleRadians),\n      circlePerimeterY = this._y + hSize * Math.sin(angleRadians);\n    return [circlePerimeterX, circlePerimeterY];\n  }\n\n  _calcResizeIconCenterCoords() {\n    return this._calcCirclePerimeterCoords(-45);\n  }\n\n  _isCoordWithinArea(coord) {\n    return Math.sqrt((coord[0] - this._x) * (coord[0] - this._x) + (coord[1] - this._y) * (coord[1] - this._y)) < this._size / 2;\n  };\n\n  _isCoordWithinBoxResize(coord) {\n    var resizeIconCenterCoords = this._calcResizeIconCenterCoords();\n    var hSize = this._boxResizeHoverSize / 2;\n    return (coord[0] > resizeIconCenterCoords[0] - hSize && coord[0] < resizeIconCenterCoords[0] + hSize &&\n      coord[1] > resizeIconCenterCoords[1] - hSize && coord[1] < resizeIconCenterCoords[1] + hSize);\n  };\n\n  _drawArea(ctx, centerCoords, size) {\n    ctx.arc(centerCoords[0], centerCoords[1], size / 2, 0, 2 * Math.PI);\n  };\n\n  draw() {\n    CropArea.prototype.draw.apply(this, arguments);\n\n    // draw move icon\n    this._cropCanvas.drawIconMove([this._x, this._y], this._areaIsHover ? this._iconMoveHoverRatio : this._iconMoveNormalRatio);\n\n    // draw resize cubes\n    this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(), this._boxResizeBaseSize, this._boxResizeIsHover ? this._boxResizeHoverRatio : this._boxResizeNormalRatio);\n  };\n\n  processMouseMove(mouseCurX, mouseCurY) {\n    var cursor = 'default';\n    var res = false;\n\n    this._boxResizeIsHover = false;\n    this._areaIsHover = false;\n\n    if (this._areaIsDragging) {\n      this._x = mouseCurX - this._posDragStartX;\n      this._y = mouseCurY - this._posDragStartY;\n      this._areaIsHover = true;\n      cursor = 'move';\n      res = true;\n      this._events.trigger('area-move');\n    } else if (this._boxResizeIsDragging) {\n      cursor = 'nesw-resize';\n      var iFR, iFX, iFY;\n      iFX = mouseCurX - this._posResizeStartX;\n      iFY = this._posResizeStartY - mouseCurY;\n      if (iFX > iFY) {\n        iFR = this._posResizeStartSize + iFY * 2;\n      } else {\n        iFR = this._posResizeStartSize + iFX * 2;\n      }\n\n      this._size = Math.max(this._minSize, iFR);\n      this._boxResizeIsHover = true;\n      res = true;\n      this._events.trigger('area-resize');\n    } else if (this._isCoordWithinBoxResize([mouseCurX, mouseCurY])) {\n      cursor = 'nesw-resize';\n      this._areaIsHover = false;\n      this._boxResizeIsHover = true;\n      res = true;\n    } else if (this._isCoordWithinArea([mouseCurX, mouseCurY])) {\n      cursor = 'move';\n      this._areaIsHover = true;\n      res = true;\n    }\n\n    this._dontDragOutside();\n    this._ctx.canvas.style.cursor = cursor;\n\n    return res;\n  };\n\n  processMouseDown(mouseDownX: number, mouseDownY: number) {\n    if (this._isCoordWithinBoxResize([mouseDownX, mouseDownY])) {\n      this._areaIsDragging = false;\n      this._areaIsHover = false;\n      this._boxResizeIsDragging = true;\n      this._boxResizeIsHover = true;\n      this._posResizeStartX = mouseDownX;\n      this._posResizeStartY = mouseDownY;\n      this._posResizeStartSize = this._size;\n      this._events.trigger('area-resize-start');\n    } else if (this._isCoordWithinArea([mouseDownX, mouseDownY])) {\n      this._areaIsDragging = true;\n      this._areaIsHover = true;\n      this._boxResizeIsDragging = false;\n      this._boxResizeIsHover = false;\n      this._posDragStartX = mouseDownX - this._x;\n      this._posDragStartY = mouseDownY - this._y;\n      this._events.trigger('area-move-start');\n    }\n  };\n\n  processMouseUp(/*mouseUpX, mouseUpY*/) {\n    if (this._areaIsDragging) {\n      this._areaIsDragging = false;\n      this._events.trigger('area-move-end');\n    }\n    if (this._boxResizeIsDragging) {\n      this._boxResizeIsDragging = false;\n      this._events.trigger('area-resize-end');\n    }\n    this._areaIsHover = false;\n    this._boxResizeIsHover = false;\n\n    this._posDragStartX = 0;\n    this._posDragStartY = 0;\n  };\n\n}","import {CropArea} from \"./crop-area\";\n\nexport class CropAreaSquare extends CropArea {\n    _resizeCtrlBaseRadius = 10;\n    _resizeCtrlNormalRatio = 0.75;\n    _resizeCtrlHoverRatio = 1;\n    _iconMoveNormalRatio = 0.9;\n    _iconMoveHoverRatio = 1.2;\n\n    _posDragStartX = 0;\n    _posDragStartY = 0;\n    _posResizeStartX = 0;\n    _posResizeStartY = 0;\n    _posResizeStartSize = 0;\n\n    _resizeCtrlIsHover = -1;\n    _areaIsHover = false;\n    _resizeCtrlIsDragging = -1;\n    _areaIsDragging = false;\n\n    private _resizeCtrlNormalRadius: number;\n    private _resizeCtrlHoverRadius: number;\n\n    constructor(ctx, events) {\n        super(ctx, events);\n\n        this._resizeCtrlNormalRadius = this._resizeCtrlBaseRadius * this._resizeCtrlNormalRatio;\n        this._resizeCtrlHoverRadius = this._resizeCtrlBaseRadius * this._resizeCtrlHoverRatio;\n    };\n\n    _calcSquareCorners() {\n        var hSize = this._size / 2;\n        return [\n            [this._x - hSize, this._y - hSize],\n            [this._x + hSize, this._y - hSize],\n            [this._x - hSize, this._y + hSize],\n            [this._x + hSize, this._y + hSize]\n        ];\n    }\n\n    _calcSquareDimensions() {\n        var hSize = this._size / 2;\n        return {\n            left: this._x - hSize,\n            top: this._y - hSize,\n            right: this._x + hSize,\n            bottom: this._y + hSize\n        };\n    }\n\n    _isCoordWithinArea(coord) {\n        var squareDimensions = this._calcSquareDimensions();\n        return (coord[0] >= squareDimensions.left && coord[0] <= squareDimensions.right && coord[1] >= squareDimensions.top && coord[1] <= squareDimensions.bottom);\n    }\n\n    _isCoordWithinResizeCtrl(coord) {\n        var resizeIconsCenterCoords = this._calcSquareCorners();\n        var res = -1;\n        for (var i = 0, len = resizeIconsCenterCoords.length; i < len; i++) {\n            var resizeIconCenterCoords = resizeIconsCenterCoords[i];\n            if (coord[0] > resizeIconCenterCoords[0] - this._resizeCtrlHoverRadius && coord[0] < resizeIconCenterCoords[0] + this._resizeCtrlHoverRadius &&\n                coord[1] > resizeIconCenterCoords[1] - this._resizeCtrlHoverRadius && coord[1] < resizeIconCenterCoords[1] + this._resizeCtrlHoverRadius) {\n                res = i;\n                break;\n            }\n        }\n        return res;\n    }\n\n    _drawArea(ctx, centerCoords, size) {\n        var hSize = size / 2;\n        ctx.rect(centerCoords[0] - hSize, centerCoords[1] - hSize, size, size);\n    }\n\n    draw() {\n        CropArea.prototype.draw.apply(this, arguments);\n\n        // draw move icon\n        this._cropCanvas.drawIconMove([this._x, this._y], this._areaIsHover ? this._iconMoveHoverRatio : this._iconMoveNormalRatio);\n\n        // draw resize cubes\n        var resizeIconsCenterCoords = this._calcSquareCorners();\n        for (var i = 0, len = resizeIconsCenterCoords.length; i < len; i++) {\n            var resizeIconCenterCoords = resizeIconsCenterCoords[i];\n            this._cropCanvas.drawIconResizeCircle(resizeIconCenterCoords, this._resizeCtrlBaseRadius, this._resizeCtrlIsHover === i ? this._resizeCtrlHoverRatio : this._resizeCtrlNormalRatio);\n        }\n    }\n\n    processMouseMove(mouseCurX, mouseCurY) {\n        var cursor = 'default';\n        var res = false;\n\n        this._resizeCtrlIsHover = -1;\n        this._areaIsHover = false;\n\n        if (this._areaIsDragging) {\n            this._x = mouseCurX - this._posDragStartX;\n            this._y = mouseCurY - this._posDragStartY;\n            this._areaIsHover = true;\n            cursor = 'move';\n            res = true;\n            this._events.trigger('area-move');\n        } else if (this._resizeCtrlIsDragging > -1) {\n            var xMulti, yMulti;\n            switch (this._resizeCtrlIsDragging) {\n                case 0: // Top Left\n                    xMulti = -1;\n                    yMulti = -1;\n                    cursor = 'nwse-resize';\n                    break;\n                case 1: // Top Right\n                    xMulti = 1;\n                    yMulti = -1;\n                    cursor = 'nesw-resize';\n                    break;\n                case 2: // Bottom Left\n                    xMulti = -1;\n                    yMulti = 1;\n                    cursor = 'nesw-resize';\n                    break;\n                case 3: // Bottom Right\n                    xMulti = 1;\n                    yMulti = 1;\n                    cursor = 'nwse-resize';\n                    break;\n            }\n            var iFX = (mouseCurX - this._posResizeStartX) * xMulti;\n            var iFY = (mouseCurY - this._posResizeStartY) * yMulti;\n            var iFR;\n            if (iFX > iFY) {\n                iFR = this._posResizeStartSize + iFY;\n            } else {\n                iFR = this._posResizeStartSize + iFX;\n            }\n            var wasSize = this._size;\n            this._size = Math.max(this._minSize, iFR);\n            var posModifier = (this._size - wasSize) / 2;\n            this._x += posModifier * xMulti;\n            this._y += posModifier * yMulti;\n            this._resizeCtrlIsHover = this._resizeCtrlIsDragging;\n            res = true;\n            this._events.trigger('area-resize');\n        } else {\n            var hoveredResizeBox = this._isCoordWithinResizeCtrl([mouseCurX, mouseCurY]);\n            if (hoveredResizeBox > -1) {\n                switch (hoveredResizeBox) {\n                    case 0:\n                        cursor = 'nwse-resize';\n                        break;\n                    case 1:\n                        cursor = 'nesw-resize';\n                        break;\n                    case 2:\n                        cursor = 'nesw-resize';\n                        break;\n                    case 3:\n                        cursor = 'nwse-resize';\n                        break;\n                }\n                this._areaIsHover = false;\n                this._resizeCtrlIsHover = hoveredResizeBox;\n                res = true;\n            } else if (this._isCoordWithinArea([mouseCurX, mouseCurY])) {\n                cursor = 'move';\n                this._areaIsHover = true;\n                res = true;\n            }\n        }\n\n        this._dontDragOutside();\n        this._ctx.canvas.style.cursor = cursor;\n\n        return res;\n    }\n\n    processMouseDown(mouseDownX, mouseDownY) {\n        var isWithinResizeCtrl = this._isCoordWithinResizeCtrl([mouseDownX, mouseDownY]);\n        if (isWithinResizeCtrl > -1) {\n            this._areaIsDragging = false;\n            this._areaIsHover = false;\n            this._resizeCtrlIsDragging = isWithinResizeCtrl;\n            this._resizeCtrlIsHover = isWithinResizeCtrl;\n            this._posResizeStartX = mouseDownX;\n            this._posResizeStartY = mouseDownY;\n            this._posResizeStartSize = this._size;\n            this._events.trigger('area-resize-start');\n        } else if (this._isCoordWithinArea([mouseDownX, mouseDownY])) {\n            this._areaIsDragging = true;\n            this._areaIsHover = true;\n            this._resizeCtrlIsDragging = -1;\n            this._resizeCtrlIsHover = -1;\n            this._posDragStartX = mouseDownX - this._x;\n            this._posDragStartY = mouseDownY - this._y;\n            this._events.trigger('area-move-start');\n        }\n    }\n\n    processMouseUp(/*mouseUpX, mouseUpY*/) {\n        if (this._areaIsDragging) {\n            this._areaIsDragging = false;\n            this._events.trigger('area-move-end');\n        }\n        if (this._resizeCtrlIsDragging > -1) {\n            this._resizeCtrlIsDragging = -1;\n            this._events.trigger('area-resize-end');\n        }\n        this._areaIsHover = false;\n        this._resizeCtrlIsHover = -1;\n\n        this._posDragStartX = 0;\n        this._posDragStartY = 0;\n    }\n}","import {CropEXIF} from \"./crop-exif\";\nimport {CropAreaCircle} from \"./crop-area-circle\";\nimport {CropAreaSquare} from \"./crop-area-square\";\nimport {CropAreaType, CropArea} from \"./crop-area\";\nimport {CropAreaDetails} from \"../fc-img-crop.component\";\n\nexport class CropHost {\n\n  ctx = null;\n  image = null;\n\n  cropArea: CropArea;\n\n  // Dimensions\n  minCanvasDims = [100, 100];\n  maxCanvasDims = [300, 300];\n\n  resultImageSize = 200;\n  resultImageFormat = 'image/png';\n\n  resultImageQuality;\n\n  private element: any;\n\n  constructor(private elCanvas, private opts, private events) {\n    this.element = elCanvas.parentElement;\n\n    this.ctx = elCanvas.getContext('2d');\n\n    this.cropArea = new CropAreaCircle(this.ctx, events);\n\n    document.addEventListener('mousemove', this.onMouseMove.bind(this));\n    elCanvas.addEventListener('mousedown', this.onMouseDown.bind(this));\n    document.addEventListener('mouseup', this.onMouseUp.bind(this));\n\n    document.addEventListener('touchmove', this.onMouseMove.bind(this));\n    elCanvas.addEventListener('touchstart', this.onMouseDown.bind(this));\n    document.addEventListener('touchend', this.onMouseUp.bind(this));\n  }\n\n  destroy() {\n    document.removeEventListener('mousemove', this.onMouseMove);\n    this.elCanvas.removeEventListener('mousedown', this.onMouseDown);\n    document.removeEventListener('mouseup', this.onMouseMove);\n\n    document.removeEventListener('touchmove', this.onMouseMove);\n    this.elCanvas.removeEventListener('touchstart', this.onMouseDown);\n    document.removeEventListener('touchend', this.onMouseMove);\n\n    this.elCanvas.remove();\n  }\n\n  drawScene() {\n    // clear canvas\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n\n    if (this.image !== null) {\n      // draw source this.image\n      this.ctx.drawImage(this.image, 0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n      this.ctx.save();\n\n      // and make it darker\n      this.ctx.fillStyle = 'rgba(0, 0, 0, 0.65)';\n      this.ctx.fillRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n\n      this.ctx.restore();\n\n      this.cropArea.draw();\n    }\n  }\n\n  resetCropHost(cw?, ch?) {\n    if (this.image !== null) {\n      this.cropArea.setImage(this.image);\n      var imageWidth = this.image.width || cw;\n      var imageHeight = this.image.height || ch;\n      var imageDims = [imageWidth, imageHeight];\n\n      // Compute canvas dimensions to fit full display into host\n      var imageRatio = imageWidth / imageHeight;\n      var canvasDims = imageDims;\n      if (canvasDims[0] > this.maxCanvasDims[0]) {\n        canvasDims[0] = this.maxCanvasDims[0];\n        canvasDims[1] = canvasDims[0] / imageRatio;\n      } else if (canvasDims[0] < this.minCanvasDims[0]) {\n        canvasDims[0] = this.minCanvasDims[0];\n        canvasDims[1] = canvasDims[0] / imageRatio;\n      }\n      if (canvasDims[1] > this.maxCanvasDims[1]) {\n        canvasDims[1] = this.maxCanvasDims[1];\n        canvasDims[0] = canvasDims[1] * imageRatio;\n      } else if (canvasDims[1] < this.minCanvasDims[1]) {\n        canvasDims[1] = this.minCanvasDims[1];\n        canvasDims[0] = canvasDims[1] * imageRatio;\n      }\n      var w = Math.floor(canvasDims[0]);\n      var h = Math.floor(canvasDims[1]);\n      canvasDims[0] = w;\n      canvasDims[1] = h;\n      console.debug('canvas reset =' + w + 'x' + h);\n      this.elCanvas.width = w;\n      this.elCanvas.height = h;\n\n      // Compensate CSS 50% centering of canvas inside host\n      this.elCanvas.style.marginLeft = -w / 2 + 'px';\n      this.elCanvas.style.marginTop = -h / 2 + 'px';\n\n      // Center crop area by default\n      this.cropArea.setX(this.ctx.canvas.width / 2);\n      this.cropArea.setY(this.ctx.canvas.height / 2);\n\n      this.cropArea.setSize(Math.min(200, this.ctx.canvas.width / 2, this.ctx.canvas.height / 2));\n    } else {\n      this.elCanvas.width = 0;\n      this.elCanvas.height = 0;\n      this.elCanvas.style.marginLeft = 0;\n      this.elCanvas.style.marginTop = 0;\n    }\n\n    this.drawScene();\n\n    return canvasDims;\n  }\n\n  /**\n   * Returns event.changedTouches directly if event is a TouchEvent.\n   * If event is a jQuery event, return changedTouches of event.originalEvent\n   */\n  static getChangedTouches(event) {\n    return event.changedTouches ? event.changedTouches : event.originalEvent.changedTouches;\n  }\n\n  onMouseMove(e) {\n    if (this.image !== null) {\n      var offset = CropHost.getElementOffset(this.ctx.canvas),\n        pageX, pageY;\n      if (e.type === 'touchmove') {\n        pageX = CropHost.getChangedTouches(e)[0].pageX;\n        pageY = CropHost.getChangedTouches(e)[0].pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n      this.cropArea.processMouseMove(pageX - offset.left, pageY - offset.top);\n      this.drawScene();\n    }\n  }\n\n  onMouseDown(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.image !== null) {\n      var offset = CropHost.getElementOffset(this.ctx.canvas),\n        pageX, pageY;\n      if (e.type === 'touchstart') {\n        pageX = CropHost.getChangedTouches(e)[0].pageX;\n        pageY = CropHost.getChangedTouches(e)[0].pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n      this.cropArea.processMouseDown(pageX - offset.left, pageY - offset.top);\n      this.drawScene();\n    }\n  }\n\n  onMouseUp(e) {\n    if (this.image !== null) {\n      var offset = CropHost.getElementOffset(this.ctx.canvas),\n        pageX, pageY;\n      if (e.type === 'touchend') {\n        pageX = CropHost.getChangedTouches(e)[0].pageX;\n        pageY = CropHost.getChangedTouches(e)[0].pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n      this.cropArea.processMouseUp(pageX - offset.left, pageY - offset.top);\n      this.drawScene();\n    }\n  }\n\n  getResultImageDataURI() {\n    var temp_canvas = <HTMLCanvasElement>document.createElement('CANVAS');\n    var temp_ctx = temp_canvas.getContext('2d');\n    temp_canvas.width = this.resultImageSize;\n    temp_canvas.height = this.resultImageSize;\n    if (this.image !== null) {\n      temp_ctx.drawImage(this.image,\n        (this.cropArea.getX() - this.cropArea.getSize() / 2) * (this.image.width / this.ctx.canvas.width),\n        (this.cropArea.getY() - this.cropArea.getSize() / 2) * (this.image.height / this.ctx.canvas.height),\n        this.cropArea.getSize() * (this.image.width / this.ctx.canvas.width),\n        this.cropArea.getSize() * (this.image.height / this.ctx.canvas.height),\n        0, 0, this.resultImageSize, this.resultImageSize);\n    }\n    if (this.resultImageQuality !== null) {\n      return temp_canvas.toDataURL(this.resultImageFormat, this.resultImageQuality);\n    }\n    return temp_canvas.toDataURL(this.resultImageFormat);\n  }\n\n  redraw() {\n    this.drawScene();\n  }\n\n  setNewImageSource(imageSource) {\n    this.image = null;\n    this.resetCropHost();\n    this.events.trigger('image-updated');\n    if (!!imageSource) {\n      var newImage = new Image();\n      if (imageSource.substring(0, 4).toLowerCase() === 'http') {\n        newImage.crossOrigin = 'anonymous';\n      }\n      const self = this;\n      newImage.onload = function () {\n        self.events.trigger('load-done');\n\n        CropEXIF.getData(newImage, () => {\n          var orientation = CropEXIF.getTag(newImage, 'Orientation');\n          let cw = newImage.width, ch = newImage.height, cx = 0, cy = 0, deg = 0;\n\n          function imageDone() {\n            console.debug('dims=' + cw + 'x' + ch);\n            var canvasDims = self.resetCropHost(cw, ch);\n            self.setMaxDimensions(canvasDims[0], canvasDims[1]);\n            self.events.trigger('image-updated');\n            self.events.trigger('image-ready');\n          }\n\n          if ([3, 6, 8].indexOf(orientation) >= 0) {\n            const canvas = document.createElement(\"canvas\");\n            const ctx = canvas.getContext(\"2d\");\n            switch (orientation) {\n              case 3:\n                cx = -newImage.width;\n                cy = -newImage.height;\n                deg = 180;\n                break;\n              case 6:\n                cw = newImage.height;\n                ch = newImage.width;\n                cy = -newImage.height;\n                deg = 90;\n                break;\n              case 8:\n                cw = newImage.height;\n                ch = newImage.width;\n                cx = -newImage.width;\n                deg = 270;\n                break;\n            }\n            canvas.width = cw;\n            canvas.height = ch;\n            self.ctx.rotate(deg * Math.PI / 180);\n            self.ctx.drawImage(newImage, cx, cy);\n\n            self.image = new Image();\n            self.image.onload = function () {\n              imageDone();\n            };\n            self.image.src = canvas.toDataURL(\"image/png\");\n          } else {\n            self.image = newImage;\n            imageDone();\n          }\n        });\n      };\n      newImage.onerror = error => {\n        this.events.trigger('load-error', [error]);\n      };\n      this.events.trigger('load-start');\n      newImage.src = imageSource;\n    }\n  }\n\n  setMaxDimensions(width, height) {\n    console.debug('setMaxDimensions(' + width + ', ' + height + ')');\n    if (this.image !== null) {\n      const curWidth = this.ctx.canvas.width,\n        curHeight = this.ctx.canvas.height;\n\n      const ratioNewCurWidth = this.ctx.canvas.width / curWidth,\n        ratioNewCurHeight = this.ctx.canvas.height / curHeight,\n        ratioMin = Math.min(ratioNewCurWidth, ratioNewCurHeight);\n    }\n    this.maxCanvasDims = [width, height];\n    return this.resetCropHost(width, height);\n  }\n\n  setAreaMinSize(size) {\n    size = parseInt(size, 10);\n    if (!isNaN(size)) {\n      this.cropArea.setMinSize(size);\n      this.drawScene();\n    }\n  }\n\n  setResultImageSize(size) {\n    size = parseInt(size, 10);\n    if (!isNaN(size)) {\n      this.resultImageSize = size;\n    }\n  }\n\n  setResultImageFormat(format) {\n    this.resultImageFormat = format;\n  }\n\n  setResultImageQuality(quality) {\n    quality = parseFloat(quality);\n    if (!isNaN(quality) && quality >= 0 && quality <= 1) {\n      this.resultImageQuality = quality;\n    }\n  }\n\n  setAreaType(type: CropAreaType) {\n    const curSize = this.cropArea.getSize(),\n      curMinSize = this.cropArea.getMinSize(),\n      curX = this.cropArea.getX(),\n      curY = this.cropArea.getY();\n\n    if (type === CropAreaType.Square) {\n      this.cropArea = new CropAreaSquare(this.ctx, this.events);\n    } else {\n      this.cropArea = new CropAreaCircle(this.ctx, this.events);\n    }\n    this.cropArea.setMinSize(curMinSize);\n    this.cropArea.setSize(curSize);\n    this.cropArea.setX(curX);\n    this.cropArea.setY(curY);\n\n    // this.resetCropHost();\n    if (this.image !== null) {\n      this.cropArea.setImage(this.image);\n    }\n    this.drawScene();\n  }\n\n  getAreaDetails() : CropAreaDetails {\n    return {\n      x: this.cropArea.getX(),\n      y: this.cropArea.getY(),\n      size: this.cropArea.getSize(),\n      image: {width: this.cropArea.getImage().width, height: this.cropArea.getImage().height},\n      canvas: {width: this.ctx.canvas.width, height: this.ctx.canvas.height}\n    };\n  }\n\n  static getElementOffset(elem) {\n    var box = elem.getBoundingClientRect();\n\n    var body = document.body;\n    var docElem = document.documentElement;\n\n    var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n    var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\n    var clientTop = docElem.clientTop || body.clientTop || 0;\n    var clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\n    var top = box.top + scrollTop - clientTop;\n    var left = box.left + scrollLeft - clientLeft;\n\n    return {top: Math.round(top), left: Math.round(left)};\n  }\n}","import {\n  AfterViewInit, ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges, ViewEncapsulation\n} from '@angular/core';\nimport {CropPubSub} from \"./classes/crop-pubsub\";\nimport {CropHost} from \"./classes/crop-host\";\nimport {CropAreaType} from \"./classes/crop-area\";\n\nexport interface CropAreaDetails {\n  x: number;\n  y: number;\n  size: number;\n  image: { width: number, height: number };\n  canvas: { width: number, height: number };\n}\n\n@Component({\n  selector: 'fc-img-crop',\n  template: '<canvas></canvas>',\n  styleUrls: ['fc-img-crop.component.scss']\n})\nexport class FcImgCropComponent implements OnChanges, OnInit, AfterViewInit, OnDestroy {\n\n  @Input() image;\n\n  @Input() resultImage;\n  @Output() resultImageChange = new EventEmitter();\n\n  @Input() changeOnFly;\n  @Input() areaType: CropAreaType;\n  @Input() areaMinSize;\n\n  @Input() areaDetails: CropAreaDetails;\n  @Output() areaDetailsChange = new EventEmitter<CropAreaDetails>();\n\n  @Input() resultImageSize;\n  @Input() resultImageFormat: string;\n  @Input() resultImageQuality;\n\n  @Output() onChange = new EventEmitter();\n  @Output() onLoadBegin = new EventEmitter();\n  @Output() onLoadDone = new EventEmitter();\n  @Output() onLoadError = new EventEmitter();\n  @Output() onImageReady = new EventEmitter();\n\n  private events = new CropPubSub();\n  private cropHost: CropHost;\n  private observer: MutationObserver;\n\n  constructor(private el: ElementRef, private ref: ChangeDetectorRef) {\n  }\n\n  ngOnInit() {\n    const events = this.events;\n\n    // Init Crop Host\n    let el = this.el.nativeElement.querySelector('canvas');\n    this.cropHost = new CropHost(el, {}, events);\n\n    // Setup CropHost Event Handlers\n    const self = this;\n    events\n      .on('load-start', () => {\n        self.onLoadBegin.emit({});\n        self.ref.detectChanges();\n      })\n      .on('load-done', () => {\n        self.onLoadDone.emit({});\n        self.ref.detectChanges();\n      })\n      .on('image-ready', () => {\n        if (self.onImageReady.emit({})) {\n          self.cropHost.redraw();\n          self.ref.detectChanges();\n        }\n      })\n      .on('load-error', () => {\n        self.onLoadError.emit({});\n        self.ref.detectChanges();\n      })\n      .on('area-move area-resize', () => {\n        if (!!self.changeOnFly) {\n          self.updateResultImage();\n          self.ref.detectChanges();\n        }\n      })\n      .on('area-move-end area-resize-end image-updated', () => {\n        self.updateResultImage();\n        self.areaDetails = self.cropHost.getAreaDetails();\n        self.areaDetailsChange.emit(self.areaDetails);\n      });\n  }\n\n  // Store Result Image to check if it's changed\n  storedResultImage;\n\n  updateResultImage() {\n    const resultImage = this.cropHost.getResultImageDataURI();\n    if (this.storedResultImage !== resultImage) {\n      this.storedResultImage = resultImage;\n      this.resultImage = resultImage;\n      if (this.resultImageChange.observers.length) {\n        this.resultImageChange.emit(this.resultImage);\n      }\n      if (this.onChange.observers.length > 0) {\n        this.onChange.emit({$dataURI: this.resultImage});\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.cropHost.destroy();\n  }\n\n  /**\n   * Sync CropHost with Directive's options\n   */\n  ngOnChanges(changes: SimpleChanges): void {\n    if (this.cropHost) {\n      if (changes.image) {\n        this.cropHost.setNewImageSource(this.image);\n      }\n      if (changes.areaType) {\n        this.cropHost.setAreaType(this.areaType);\n        this.updateResultImage();\n      }\n      if (changes.areaMinSize) {\n        this.cropHost.setAreaMinSize(this.areaMinSize);\n        this.updateResultImage();\n      }\n      if (changes.resultImageSize) {\n        this.cropHost.setResultImageSize(this.resultImageSize);\n        this.updateResultImage();\n      }\n      if (changes.resultImageFormat) {\n        this.cropHost.setResultImageFormat(this.resultImageFormat);\n        this.updateResultImage();\n      }\n      if (changes.resultImageQuality) {\n        this.cropHost.setResultImageQuality(this.resultImageQuality);\n        this.updateResultImage();\n      }\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.observer = new MutationObserver(mutations => {\n      mutations.forEach((mutation: MutationRecord) => {\n        if (mutation.attributeName === 'clientWidth' || mutation.attributeName === 'clientHeight') {\n          this.cropHost.setMaxDimensions(this.el.nativeElement.clientWidth, this.el.nativeElement.clientHeight);\n          this.updateResultImage();\n        }\n      });\n    });\n    const config = {attributes: true, childList: true, characterData: true};\n    this.observer.observe(this.el.nativeElement, config);\n  }\n}","import {NgModule} from '@angular/core';\n\nimport {FcImgCropComponent} from \"./fc-img-crop.component\";\n\n@NgModule({\n    declarations: [\n        FcImgCropComponent\n    ],\n    exports: [\n        FcImgCropComponent\n    ]\n})\nexport class CropModule {\n}\n"],"names":["tslib_1.__extends","EventEmitter","Component","ElementRef","ChangeDetectorRef","Input","Output","NgModule"],"mappings":"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,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;gCAC3E,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;+BACrE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;+BAC/E,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;+BAC/E,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;+BACxE,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE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"}
